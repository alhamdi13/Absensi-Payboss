<!doctype html>
<html lang="id">
Â <head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>PayBoss - Sistem Absensi</title>
Â  <script src="/_sdk/data_sdk.js"></script>
Â  <script src="/_sdk/element_sdk.js"></script>
Â  <script src="https://cdn.tailwindcss.com"></script>
Â  <style>
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  * {
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes fadeIn {
Â  Â  Â  Â  Â  Â  from { opacity: 0; transform: translateY(10px); }
Â  Â  Â  Â  Â  Â  to { opacity: 1; transform: translateY(0); }
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes pulse {
Â  Â  Â  Â  Â  Â  0%, 100% { opacity: 1; }
Â  Â  Â  Â  Â  Â  50% { opacity: 0.5; }
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes slideIn {
Â  Â  Â  Â  Â  Â  from { transform: translateX(-100%); }
Â  Â  Â  Â  Â  Â  to { transform: translateX(0); }
Â  Â  Â  Â  }

Â  Â  Â  Â  .fade-in {
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.3s ease-out;
Â  Â  Â  Â  }

Â  Â  Â  Â  .pulse-animation {
Â  Â  Â  Â  Â  Â  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
Â  Â  Â  Â  }

Â  Â  Â  Â  .slide-in {
Â  Â  Â  Â  Â  Â  animation: slideIn 0.3s ease-out;
Â  Â  Â  Â  }

Â  Â  Â  Â  .camera-container {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  max-width: 500px;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  }

Â  Â  Â  Â  #video, #canvas {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: auto;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .overlay-circle {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  transform: translate(-50%, -50%);
Â  Â  Â  Â  Â  Â  width: 70%;
Â  Â  Â  Â  Â  Â  height: 0;
Â  Â  Â  Â  Â  Â  padding-bottom: 70%;
Â  Â  Â  Â  Â  Â  border: 3px dashed rgba(255, 255, 255, 0.6);
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  .grid-photo {
Â  Â  Â  Â  Â  Â  aspect-ratio: 1;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  }

Â  Â  Â  Â  .status-badge {
Â  Â  Â  Â  Â  Â  display: inline-flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 6px;
Â  Â  Â  Â  Â  Â  padding: 6px 12px;
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }

Â  Â  Â  Â  .status-hadir {
Â  Â  Â  Â  Â  Â  background-color: #dcfce7;
Â  Â  Â  Â  Â  Â  color: #166534;
Â  Â  Â  Â  }

Â  Â  Â  Â  .status-terlambat {
Â  Â  Â  Â  Â  Â  background-color: #fef3c7;
Â  Â  Â  Â  Â  Â  color: #92400e;
Â  Â  Â  Â  }

Â  Â  Â  Â  .status-tidak-sesuai {
Â  Â  Â  Â  Â  Â  background-color: #fee2e2;
Â  Â  Â  Â  Â  Â  color: #991b1b;
Â  Â  Â  Â  }

Â  Â  Â  Â  .shift-badge {
Â  Â  Â  Â  Â  Â  padding: 4px 10px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }

Â  Â  Â  Â  .shift-1 {
Â  Â  Â  Â  Â  Â  background-color: #dbeafe;
Â  Â  Â  Â  Â  Â  color: #1e40af;
Â  Â  Â  Â  }

Â  Â  Â  Â  .shift-2 {
Â  Â  Â  Â  Â  Â  background-color: #fef3c7;
Â  Â  Â  Â  Â  Â  color: #92400e;
Â  Â  Â  Â  }

Â  Â  Â  Â  .shift-3 {
Â  Â  Â  Â  Â  Â  background-color: #e0e7ff;
Â  Â  Â  Â  Â  Â  color: #3730a3;
Â  Â  Â  Â  }

Â  Â  Â  Â  .shift-off {
Â  Â  Â  Â  Â  Â  background-color: #f1f5f9;
Â  Â  Â  Â  Â  Â  color: #64748b;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card-hover {
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card-hover:hover {
Â  Â  Â  Â  Â  Â  transform: translateY(-4px);
Â  Â  Â  Â  Â  Â  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-primary {
Â  Â  Â  Â  Â  Â  transition: all 0.2s ease;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-primary:hover {
Â  Â  Â  Â  Â  Â  transform: scale(1.02);
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-primary:active {
Â  Â  Â  Â  Â  Â  transform: scale(0.98);
Â  Â  Â  Â  }

Â  Â  Â  Â  #canvas {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  .loading-spinner {
Â  Â  Â  Â  Â  Â  border: 3px solid rgba(255, 255, 255, 0.3);
Â  Â  Â  Â  Â  Â  border-top-color: white;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  width: 24px;
Â  Â  Â  Â  Â  Â  height: 24px;
Â  Â  Â  Â  Â  Â  animation: spin 0.8s linear infinite;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes spin {
Â  Â  Â  Â  Â  Â  to { transform: rotate(360deg); }
Â  Â  Â  Â  }

Â  Â  Â  Â  .modal-backdrop {
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.5);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(4px);
Â  Â  Â  Â  }

Â  Â  Â  Â  .calendar-grid {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(7, 1fr);
Â  Â  Â  Â  Â  Â  gap: 4px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .calendar-day {
Â  Â  Â  Â  Â  Â  aspect-ratio: 1;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  padding: 4px;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  Â  Â  min-height: 60px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .calendar-header {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(7, 1fr);
Â  Â  Â  Â  Â  Â  gap: 4px;
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .calendar-header-day {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  padding: 8px 4px;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .roster-grid {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: 150px repeat(7, 1fr);
Â  Â  Â  Â  Â  Â  gap: 2px;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .roster-name {
Â  Â  Â  Â  Â  Â  padding: 8px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .roster-cell {
Â  Â  Â  Â  Â  Â  padding: 8px 4px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  min-height: 40px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .toast {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  bottom: 24px;
Â  Â  Â  Â  Â  Â  right: 24px;
Â  Â  Â  Â  Â  Â  padding: 16px 24px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  Â  Â  animation: slideIn 0.3s ease-out;
Â  Â  Â  Â  }

Â  Â  Â  Â  .toast-success {
Â  Â  Â  Â  Â  Â  background-color: #dcfce7;
Â  Â  Â  Â  Â  Â  color: #166534;
Â  Â  Â  Â  Â  Â  border-left: 4px solid #22c55e;
Â  Â  Â  Â  }

Â  Â  Â  Â  .toast-error {
Â  Â  Â  Â  Â  Â  background-color: #fee2e2;
Â  Â  Â  Â  Â  Â  color: #991b1b;
Â  Â  Â  Â  Â  Â  border-left: 4px solid #ef4444;
Â  Â  Â  Â  }

Â  Â  Â  Â  .toast-warning {
Â  Â  Â  Â  Â  Â  background-color: #fef3c7;
Â  Â  Â  Â  Â  Â  color: #92400e;
Â  Â  Â  Â  Â  Â  border-left: 4px solid #f59e0b;
Â  Â  Â  Â  }

Â  Â  Â  Â  .nav-tabs {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  border-bottom: 2px solid #e2e8f0;
Â  Â  Â  Â  Â  Â  margin-bottom: 24px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .nav-tab {
Â  Â  Â  Â  Â  Â  padding: 12px 24px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  border-bottom: 3px solid transparent;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  transition: all 0.2s ease;
Â  Â  Â  Â  }

Â  Â  Â  Â  .nav-tab.active {
Â  Â  Â  Â  Â  Â  border-bottom-color: #2563eb;
Â  Â  Â  Â  Â  Â  color: #2563eb;
Â  Â  Â  Â  }

Â  Â  Â  Â  .nav-tab:hover {
Â  Â  Â  Â  Â  Â  background-color: #f8fafc;
Â  Â  Â  Â  }
Â  Â  </style>
Â  <style>@view-transition { navigation: auto; }</style>
Â </head>
Â <body class="min-h-full">
Â  <div id="app" class="min-h-full"></div>
Â  <script>
Â  Â  Â  Â  const defaultConfig = {
Â  Â  Â  Â  Â  Â  background_color: "#f0f4f8",
Â  Â  Â  Â  Â  Â  surface_color: "#ffffff",
Â  Â  Â  Â  Â  Â  text_color: "#1e293b",
Â  Â  Â  Â  Â  Â  primary_color: "#2563eb",
Â  Â  Â  Â  Â  Â  secondary_color: "#64748b",
Â  Â  Â  Â  Â  Â  font_family: "Inter",
Â  Â  Â  Â  Â  Â  font_size: 16,
Â  Â  Â  Â  Â  Â  app_title: "PayBoss",
Â  Â  Â  Â  Â  Â  company_tagline: "Sistem Absensi & Manajemen Kepegawaian",
Â  Â  Â  Â  Â  Â  shift1_label: "Shift Pagi",
Â  Â  Â  Â  Â  Â  shift2_label: "Shift Sore",
Â  Â  Â  Â  Â  Â  shift3_label: "Shift Malam"
Â  Â  Â  Â  };

Â  Â  Â  Â  let currentView = 'login';
Â  Â  Â  Â  let currentRole = null;
Â  Â  Â  Â  let currentTab = 'dashboard';
Â  Â  Â  Â  let stream = null;
Â  Â  Â  Â  let allRecords = [];
Â  Â  Â  Â  let employees = [];
Â  Â  Â  Â  let attendances = [];
Â  Â  Â  Â  let rosters = [];

Â  Â  Â  Â  // Reference data untuk 15 karyawan PayBoss dengan posisi sesuai bisnis F&B
Â  Â  Â  Â  const REFERENCE_EMPLOYEES = [
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP001", nama: "Ahmad Rizki", posisi: "Koordinator", shift_tetap: "1",
Â  Â  Â  Â  Â  Â  Â  Â  email: "ahmad.rizki@payboss.com", telepon: "081234567001",Â 
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Merdeka No. 15, Jakarta Pusat", tanggal_lahir: "1985-03-15",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2020-01-15", pendidikan: "S1 Manajemen Bisnis",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Menikah", kontak_darurat: "Siti Rizki (Istri) - 081234567002",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiM2MzY2ZjEiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP002", nama: "Siti Nurhaliza", posisi: "Kasir", shift_tetap: "1",
Â  Â  Â  Â  Â  Â  Â  Â  email: "siti.nurhaliza@payboss.com", telepon: "081234567003",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Sudirman No. 22, Jakarta Selatan", tanggal_lahir: "1990-07-20",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2021-03-10", pendidikan: "SMK Akuntansi",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Belum Menikah", kontak_darurat: "Hj. Nurhaliza (Ibu) - 081234567004",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiNlYzQ4OTkiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP003", nama: "Budi Santoso", posisi: "Barista", shift_tetap: "2",
Â  Â  Â  Â  Â  Â  Â  Â  email: "budi.santoso@payboss.com", telepon: "081234567005",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Gatot Subroto No. 8, Jakarta Barat", tanggal_lahir: "1988-12-05",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2019-08-20", pendidikan: "SMK Perhotelan",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Menikah", kontak_darurat: "Ani Santoso (Istri) - 081234567006",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiMxMGI5ODEiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP004", nama: "Dewi Lestari", posisi: "Waitress", shift_tetap: "1",
Â  Â  Â  Â  Â  Â  Â  Â  email: "dewi.lestari@payboss.com", telepon: "081234567007",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Thamrin No. 45, Jakarta Pusat", tanggal_lahir: "1992-04-18",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2022-01-05", pendidikan: "SMK Perhotelan",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Belum Menikah", kontak_darurat: "Pak Lestari (Ayah) - 081234567008",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiNmNTllMGIiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP005", nama: "Eko Prasetyo", posisi: "Koki", shift_tetap: "2",
Â  Â  Â  Â  Â  Â  Â  Â  email: "eko.prasetyo@payboss.com", telepon: "081234567009",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Rasuna Said No. 12, Jakarta Selatan", tanggal_lahir: "1987-09-30",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2020-06-15", pendidikan: "SMK Tata Boga",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Menikah", kontak_darurat: "Rina Prasetyo (Istri) - 081234567010",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiNlZjQ0NDQiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP006", nama: "Fitri Handayani", posisi: "Kasir", shift_tetap: "3",
Â  Â  Â  Â  Â  Â  Â  Â  email: "fitri.handayani@payboss.com", telepon: "081234567011",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Kuningan No. 33, Jakarta Selatan", tanggal_lahir: "1991-11-12",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2021-09-01", pendidikan: "SMK Akuntansi",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Belum Menikah", kontak_darurat: "Ibu Handayani (Ibu) - 081234567012",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiM4YjVjZjYiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP007", nama: "Gunawan Wijaya", posisi: "Supervisor", shift_tetap: "1",
Â  Â  Â  Â  Â  Â  Â  Â  email: "gunawan.wijaya@payboss.com", telepon: "081234567013",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Kemang No. 67, Jakarta Selatan", tanggal_lahir: "1984-06-25",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2018-11-10", pendidikan: "S1 Manajemen Restoran",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Menikah", kontak_darurat: "Maya Wijaya (Istri) - 081234567014",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiMwNjk5NGYiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP008", nama: "Hana Permata", posisi: "Barista", shift_tetap: "3",
Â  Â  Â  Â  Â  Â  Â  Â  email: "hana.permata@payboss.com", telepon: "081234567015",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Senayan No. 89, Jakarta Pusat", tanggal_lahir: "1993-02-14",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2022-05-20", pendidikan: "SMK Perhotelan",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Belum Menikah", kontak_darurat: "Pak Permata (Ayah) - 081234567016",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiNkOTQ2ZWYiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP009", nama: "Indra Kusuma", posisi: "Waitress", shift_tetap: "2",
Â  Â  Â  Â  Â  Â  Â  Â  email: "indra.kusuma@payboss.com", telepon: "081234567017",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Menteng No. 54, Jakarta Pusat", tanggal_lahir: "1989-08-08",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2020-12-01", pendidikan: "SMK Perhotelan",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Menikah", kontak_darurat: "Sari Kusuma (Istri) - 081234567018",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiMzYjgyZjYiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP010", nama: "Joko Widodo", posisi: "Koki", shift_tetap: "1",
Â  Â  Â  Â  Â  Â  Â  Â  email: "joko.widodo@payboss.com", telepon: "081234567019",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Cikini No. 76, Jakarta Pusat", tanggal_lahir: "1986-01-21",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2019-04-15", pendidikan: "SMK Tata Boga",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Menikah", kontak_darurat: "Iriana Widodo (Istri) - 081234567020",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiNmOTczMTYiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP011", nama: "Kartika Sari", posisi: "Waitress", shift_tetap: "3",
Â  Â  Â  Â  Â  Â  Â  Â  email: "kartika.sari@payboss.com", telepon: "081234567021",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Blok M No. 91, Jakarta Selatan", tanggal_lahir: "1994-10-03",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2023-02-10", pendidikan: "SMK Perhotelan",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Belum Menikah", kontak_darurat: "Bu Kartika (Ibu) - 081234567022",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiNmNDY4ZmYiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP012", nama: "Lukman Hakim", posisi: "Supervisor", shift_tetap: "2",
Â  Â  Â  Â  Â  Â  Â  Â  email: "lukman.hakim@payboss.com", telepon: "081234567023",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Pancoran No. 38, Jakarta Selatan", tanggal_lahir: "1983-05-17",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2017-07-20", pendidikan: "S1 Manajemen Restoran",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Menikah", kontak_darurat: "Fatimah Hakim (Istri) - 081234567024",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiMxNGI4YTYiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP013", nama: "Maya Sari", posisi: "Barista", shift_tetap: "1",
Â  Â  Â  Â  Â  Â  Â  Â  email: "maya.sari@payboss.com", telepon: "081234567025",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Tebet No. 42, Jakarta Selatan", tanggal_lahir: "1995-06-12",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2023-03-15", pendidikan: "SMK Perhotelan",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Belum Menikah", kontak_darurat: "Pak Sari (Ayah) - 081234567026",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiNmOTczMTYiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP014", nama: "Rudi Hartono", posisi: "Koki", shift_tetap: "3",
Â  Â  Â  Â  Â  Â  Â  Â  email: "rudi.hartono@payboss.com", telepon: "081234567027",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Kalibata No. 28, Jakarta Selatan", tanggal_lahir: "1990-11-08",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2022-08-10", pendidikan: "SMK Tata Boga",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Menikah", kontak_darurat: "Sari Hartono (Istri) - 081234567028",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiMxNGI4YTYiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  nik: "EMP015", nama: "Lina Wati", posisi: "Kasir", shift_tetap: "2",
Â  Â  Â  Â  Â  Â  Â  Â  email: "lina.wati@payboss.com", telepon: "081234567029",
Â  Â  Â  Â  Â  Â  Â  Â  alamat: "Jl. Pasar Minggu No. 55, Jakarta Selatan", tanggal_lahir: "1993-09-25",
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: "2023-01-20", pendidikan: "SMK Akuntansi",
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: "Belum Menikah", kontak_darurat: "Bu Wati (Ibu) - 081234567030",
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiNlYzQ4OTkiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjM1IiByPSIxNSIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNMjAgNzVjMC0xNiAxMy40My0zMCAzMC0zMHMzMCAxNCAzMCAzMHYxMEgyMFY3NXoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  ];

Â  Â  Â  Â  // Shift configuration
Â  Â  Â  Â  const SHIFTS = {
Â  Â  Â  Â  Â  Â  '1': { start: 8, end: 16, name: 'Shift 1', grace: 15 },
Â  Â  Â  Â  Â  Â  '2': { start: 16, end: 24, name: 'Shift 2', grace: 15 },
Â  Â  Â  Â  Â  Â  '3': { start: 0, end: 8, name: 'Shift 3', grace: 15 }
Â  Â  Â  Â  };

Â  Â  Â  Â  // Work hours tracking
Â  Â  Â  Â  let workHours = [];

Â  Â  Â  Â  function generateWeeklyRoster() {
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  const startOfWeek = new Date(today);
Â  Â  Â  Â  Â  Â  startOfWeek.setDate(today.getDate() - today.getDay()); // Start from Sunday

Â  Â  Â  Â  Â  Â  const rosterData = [];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Generate roster for current week
Â  Â  Â  Â  Â  Â  for (let dayOffset = 0; dayOffset < 7; dayOffset++) {
Â  Â  Â  Â  Â  Â  Â  Â  const currentDate = new Date(startOfWeek);
Â  Â  Â  Â  Â  Â  Â  Â  currentDate.setDate(startOfWeek.getDate() + dayOffset);
Â  Â  Â  Â  Â  Â  Â  Â  const dateStr = currentDate.toISOString().split('T')[0];

Â  Â  Â  Â  Â  Â  Â  Â  REFERENCE_EMPLOYEES.forEach((emp, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let shiftRoster;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Logika roster dengan coverage 24/7 untuk bisnis F&B PayBoss
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (emp.posisi === 'Koordinator' || emp.posisi === 'Supervisor') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Koordinator & Supervisor: Tetap Senin-Jumat, weekend off
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (dayOffset === 0 || dayOffset === 6) { // Sunday & Saturday
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shiftRoster = 'OFF';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shiftRoster = emp.shift_tetap;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Kasir, Barista, Waitress, Koki: Rotasi untuk coverage 24/7 termasuk weekend
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Sistem rotasi yang memastikan ada coverage di weekend untuk operasional F&B
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const weekNumber = Math.floor(today.getTime() / (7 * 24 * 60 * 60 * 1000));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const employeeRotation = (weekNumber + index) % 4; // 4 pola rotasi
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Pola rotasi khusus untuk bisnis F&B yang butuh coverage weekend
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const rotationPatterns = [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Pattern 1: Senin-Jumat kerja, weekend off (25% staff)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [0, 1, 1, 1, 1, 1, 0], // OFF, Senin-Jumat, OFF
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Pattern 2: Selasa-Sabtu kerja, Minggu-Senin off (25% staff)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [0, 0, 1, 1, 1, 1, 1], // OFF, OFF, Selasa-Sabtu
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Pattern 3: Minggu + Rabu-Sabtu kerja, Senin-Selasa off (25% staff)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [1, 0, 0, 1, 1, 1, 1], // Minggu, OFF, OFF, Rabu-Sabtu
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Pattern 4: Minggu-Kamis kerja, Jumat-Sabtu off (25% staff)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [1, 1, 1, 1, 1, 0, 0]Â  // Minggu-Kamis, OFF, OFF
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const pattern = rotationPatterns[employeeRotation];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (pattern[dayOffset] === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shiftRoster = 'OFF';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Rotasi shift untuk hari kerja dengan prioritas weekend coverage
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (dayOffset === 0 || dayOffset === 6) { // Weekend
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Untuk weekend F&B, distribusi shift berdasarkan posisi
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (emp.posisi === 'Kasir') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Kasir lebih banyak shift 1 & 2 (jam sibuk)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const cashierShifts = ['1', '2', '1'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const shiftIndex = (weekNumber + index) % 3;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shiftRoster = cashierShifts[shiftIndex];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (emp.posisi === 'Koki') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Koki semua shift untuk coverage dapur 24/7
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const cookShifts = ['1', '2', '3'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const shiftIndex = (weekNumber + index) % 3;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shiftRoster = cookShifts[shiftIndex];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (emp.posisi === 'Barista') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Barista fokus shift 1 & 2 (jam kopi)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const baristaShifts = ['1', '2', '1'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const shiftIndex = (weekNumber + index) % 3;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shiftRoster = baristaShifts[shiftIndex];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else { // Waitress
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Waitress semua shift untuk service coverage
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const waitressShifts = ['1', '2', '3'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const shiftIndex = (weekNumber + index) % 3;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shiftRoster = waitressShifts[shiftIndex];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Untuk weekday, gunakan shift tetap atau rotasi berdasarkan posisi
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (emp.posisi === 'Kasir') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Kasir rotasi shift 1 & 2 (jam operasional utama)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const cashierWeekdayShifts = ['1', '2'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const shiftIndex = (weekNumber + index + dayOffset) % 2;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shiftRoster = cashierWeekdayShifts[shiftIndex];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Posisi lain tetap rotasi 3 shift
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const weekdayShiftRotation = (weekNumber + index + dayOffset) % 3;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const shifts = ['1', '2', '3'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shiftRoster = shifts[weekdayShiftRotation];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Check for existing leave requests
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const existingLeave = allRecords.find(r =>Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  r.type === 'leave_request' &&Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  r.nik === emp.nik &&Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  r.tanggal === dateStr &&Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  r.status === 'approved'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (existingLeave) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shiftRoster = existingLeave.leave_type === 'cuti' ? 'CUTI' : 'IJIN';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const rosterEntry = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nik: emp.nik,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nama: emp.nama,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  posisi: emp.posisi,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tanggal: dateStr,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shift_roster: shiftRoster,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  jam_kerja_normal: 8, // 8 jam kerja normal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  keterangan: shiftRoster === 'OFF' ? 'Libur (2 dari 7 hari)' :Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â shiftRoster === 'CUTI' ? 'Cuti Tahunan' :Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â shiftRoster === 'IJIN' ? 'Ijin Khusus' :
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â `${emp.posisi} ${getShiftLabel(shiftRoster)} - 8 jam kerja${(dayOffset === 0 || dayOffset === 6) ? ' (Weekend F&B)' : ''}`,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: 'roster'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rosterData.push(rosterEntry);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  return rosterData;
Â  Â  Â  Â  }

Â  Â  Â  Â  async function generateAndSaveRoster() {
Â  Â  Â  Â  Â  Â  const btn = document.getElementById('generateRosterBtn');
Â  Â  Â  Â  Â  Â  if (!btn) return;

Â  Â  Â  Â  Â  Â  btn.disabled = true;
Â  Â  Â  Â  Â  Â  btn.innerHTML = '<div class="loading-spinner"></div><span>Membuat Roster...</span>';

Â  Â  Â  Â  Â  Â  // Check if roster already exists for this week
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  const startOfWeek = new Date(today);
Â  Â  Â  Â  Â  Â  startOfWeek.setDate(today.getDate() - today.getDay());
Â  Â  Â  Â  Â  Â  const weekStart = startOfWeek.toISOString().split('T')[0];

Â  Â  Â  Â  Â  Â  const existingRoster = rosters.filter(r => r.tanggal >= weekStart);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (existingRoster.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Roster minggu ini sudah ada. Hapus roster lama terlebih dahulu.', 'warning');
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = 'ðŸ“… Generate Roster Mingguan';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const rosterData = generateWeeklyRoster();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Save all roster entries
Â  Â  Â  Â  Â  Â  let successCount = 0;
Â  Â  Â  Â  Â  Â  for (const entry of rosterData) {
Â  Â  Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.create(entry);
Â  Â  Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  successCount++;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (successCount === rosterData.length) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast(`Roster berhasil dibuat untuk ${successCount} jadwal kerja!`, 'success');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast(`Roster sebagian berhasil dibuat (${successCount}/${rosterData.length})`, 'warning');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  btn.innerHTML = 'ðŸ“… Generate Roster Mingguan';
Â  Â  Â  Â  }

Â  Â  Â  Â  async function clearRoster() {
Â  Â  Â  Â  Â  Â  const confirmBtn = document.getElementById('clearRosterConfirm');
Â  Â  Â  Â  Â  Â  if (!confirmBtn) return;

Â  Â  Â  Â  Â  Â  confirmBtn.disabled = true;
Â  Â  Â  Â  Â  Â  confirmBtn.innerHTML = '<div class="loading-spinner"></div>';

Â  Â  Â  Â  Â  Â  let deletedCount = 0;
Â  Â  Â  Â  Â  Â  for (const roster of rosters) {
Â  Â  Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.delete(roster);
Â  Â  Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  deletedCount++;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (deletedCount > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast(`${deletedCount} jadwal roster berhasil dihapus`, 'success');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  hideDeleteConfirm('clearRoster');
Â  Â  Â  Â  }

Â  Â  Â  Â  function detectShift(date) {
Â  Â  Â  Â  Â  Â  const hour = date.getHours();
Â  Â  Â  Â  Â  Â  const minute = date.getMinutes();
Â  Â  Â  Â  Â  Â  const totalMinutes = hour * 60 + minute;

Â  Â  Â  Â  Â  Â  // Shift 1: 07:45 - 16:15 (08:00 - 16:00 Â±15 min)
Â  Â  Â  Â  Â  Â  if (totalMinutes >= 465 && totalMinutes <= 975) return '1';
Â  Â  Â  Â  Â  Â  // Shift 2: 15:45 - 00:15 (16:00 - 24:00 Â±15 min)
Â  Â  Â  Â  Â  Â  if (totalMinutes >= 945 || totalMinutes <= 15) return '2';
Â  Â  Â  Â  Â  Â  // Shift 3: 23:45 - 08:15 (00:00 - 08:00 Â±15 min)
Â  Â  Â  Â  Â  Â  if (totalMinutes >= 1425 || totalMinutes <= 495) return '3';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return '1'; // Default
Â  Â  Â  Â  }

Â  Â  Â  Â  function getAttendanceStatus(detectedShift, scheduledShift, time) {
Â  Â  Â  Â  Â  Â  if (detectedShift !== scheduledShift) {
Â  Â  Â  Â  Â  Â  Â  Â  return 'tidak-sesuai';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const hour = time.getHours();
Â  Â  Â  Â  Â  Â  const minute = time.getMinutes();
Â  Â  Â  Â  Â  Â  const shift = SHIFTS[detectedShift];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Check if late (more than grace period after shift start)
Â  Â  Â  Â  Â  Â  const shiftStartMinutes = shift.start * 60;
Â  Â  Â  Â  Â  Â  const currentMinutes = hour * 60 + minute;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (currentMinutes > shiftStartMinutes + shift.grace) {
Â  Â  Â  Â  Â  Â  Â  Â  return 'terlambat';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  return 'hadir';
Â  Â  Â  Â  }

Â  Â  Â  Â  function showToast(message, type = 'success') {
Â  Â  Â  Â  Â  Â  const toast = document.createElement('div');
Â  Â  Â  Â  Â  Â  toast.className = `toast toast-${type}`;
Â  Â  Â  Â  Â  Â  toast.textContent = message;
Â  Â  Â  Â  Â  Â  document.body.appendChild(toast);

Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  toast.remove();
Â  Â  Â  Â  Â  Â  }, 3000);
Â  Â  Â  Â  }

Â  Â  Â  Â  async function startCamera() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  stream = await navigator.mediaDevices.getUserMedia({Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  video: {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  facingMode: 'user',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  width: { ideal: 1280 },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  height: { ideal: 720 }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â 
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  const video = document.getElementById('video');
Â  Â  Â  Â  Â  Â  Â  Â  if (video) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  video.srcObject = stream;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal mengakses kamera. Pastikan izin kamera diberikan.', 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function stopCamera() {
Â  Â  Â  Â  Â  Â  if (stream) {
Â  Â  Â  Â  Â  Â  Â  Â  stream.getTracks().forEach(track => track.stop());
Â  Â  Â  Â  Â  Â  Â  Â  stream = null;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function capturePhoto() {
Â  Â  Â  Â  Â  Â  const video = document.getElementById('video');
Â  Â  Â  Â  Â  Â  const canvas = document.getElementById('canvas');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!video || !canvas) return null;

Â  Â  Â  Â  Â  Â  canvas.width = video.videoWidth;
Â  Â  Â  Â  Â  Â  canvas.height = video.videoHeight;
Â  Â  Â  Â  Â  Â  const ctx = canvas.getContext('2d');
Â  Â  Â  Â  Â  Â  ctx.drawImage(video, 0, 0);

Â  Â  Â  Â  Â  Â  return canvas.toDataURL('image/jpeg', 0.8);
Â  Â  Â  Â  }

Â  Â  Â  Â  function formatDate(dateString) {
Â  Â  Â  Â  Â  Â  const date = new Date(dateString);
Â  Â  Â  Â  Â  Â  return date.toLocaleDateString('id-ID', {Â 
Â  Â  Â  Â  Â  Â  Â  Â  day: '2-digit',Â 
Â  Â  Â  Â  Â  Â  Â  Â  month: 'short',Â 
Â  Â  Â  Â  Â  Â  Â  Â  year: 'numeric'Â 
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function formatTime(dateString) {
Â  Â  Â  Â  Â  Â  const date = new Date(dateString);
Â  Â  Â  Â  Â  Â  return date.toLocaleTimeString('id-ID', {Â 
Â  Â  Â  Â  Â  Â  Â  Â  hour: '2-digit',Â 
Â  Â  Â  Â  Â  Â  Â  Â  minute: '2-digit'Â 
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function getShiftLabel(shiftNum) {
Â  Â  Â  Â  Â  Â  const config = window.elementSdk?.config || defaultConfig;
Â  Â  Â  Â  Â  Â  const labels = {
Â  Â  Â  Â  Â  Â  Â  Â  '1': config.shift1_label || defaultConfig.shift1_label,
Â  Â  Â  Â  Â  Â  Â  Â  '2': config.shift2_label || defaultConfig.shift2_label,
Â  Â  Â  Â  Â  Â  Â  Â  '3': config.shift3_label || defaultConfig.shift3_label
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  return labels[shiftNum] || `Shift ${shiftNum}`;
Â  Â  Â  Â  }

Â  Â  Â  Â  function switchTab(tabName) {
Â  Â  Â  Â  Â  Â  currentTab = tabName;
Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  }

Â  Â  Â  Â  async function handleLogin(role) {
Â  Â  Â  Â  Â  Â  currentRole = role;
Â  Â  Â  Â  Â  Â  currentView = role === 'admin' ? 'dashboard' : 'attendance';
Â  Â  Â  Â  Â  Â  currentTab = 'dashboard';
Â  Â  Â  Â  Â  Â  await render();
Â  Â  Â  Â  }

Â  Â  Â  Â  async function handleLogout() {
Â  Â  Â  Â  Â  Â  stopCamera();
Â  Â  Â  Â  Â  Â  currentRole = null;
Â  Â  Â  Â  Â  Â  currentView = 'login';
Â  Â  Â  Â  Â  Â  await render();
Â  Â  Â  Â  }

Â  Â  Â  Â  async function handleNIKSubmit() {
Â  Â  Â  Â  Â  Â  const nikInput = document.getElementById('nikInput');
Â  Â  Â  Â  Â  Â  const nik = nikInput?.value?.trim();

Â  Â  Â  Â  Â  Â  if (!nik) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Masukkan NIK terlebih dahulu', 'warning');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Check in stored employees first
Â  Â  Â  Â  Â  Â  let employee = employees.find(emp => emp.nik === nik && emp.status === 'aktif');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // If not found in stored data, check reference data
Â  Â  Â  Â  Â  Â  if (!employee) {
Â  Â  Â  Â  Â  Â  Â  Â  const refEmployee = REFERENCE_EMPLOYEES.find(emp => emp.nik === nik);
Â  Â  Â  Â  Â  Â  Â  Â  if (refEmployee) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  employee = refEmployee;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  employee.status = 'aktif'; // Set as active for reference employees
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showToast('NIK tidak ditemukan. Gunakan NIK: EMP001 - EMP012', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Store employee data and go to employee dashboard
Â  Â  Â  Â  Â  Â  window.currentEmployee = employee;
Â  Â  Â  Â  Â  Â  currentView = 'employee_dashboard';
Â  Â  Â  Â  Â  Â  await render();
Â  Â  Â  Â  }

Â  Â  Â  Â  function getShiftTime(shiftNum) {
Â  Â  Â  Â  Â  Â  const times = {
Â  Â  Â  Â  Â  Â  Â  Â  '1': '08:00 - 16:00',
Â  Â  Â  Â  Â  Â  Â  Â  '2': '16:00 - 24:00',Â 
Â  Â  Â  Â  Â  Â  Â  Â  '3': '00:00 - 08:00'
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  return times[shiftNum] || '-';
Â  Â  Â  Â  }

Â  Â  Â  Â  function startAttendanceProcess(type) {
Â  Â  Â  Â  Â  Â  window.attendanceType = type;
Â  Â  Â  Â  Â  Â  currentView = 'camera';
Â  Â  Â  Â  Â  Â  render().then(() => startCamera());
Â  Â  Â  Â  }

Â  Â  Â  Â  function openEmployeeLeaveModal(nik) {
Â  Â  Â  Â  Â  Â  const modal = document.getElementById('leaveRequestModal');
Â  Â  Â  Â  Â  Â  if (modal) {
Â  Â  Â  Â  Â  Â  Â  Â  // Pre-fill NIK
Â  Â  Â  Â  Â  Â  Â  Â  const nikField = modal.querySelector('[name="nik"]');
Â  Â  Â  Â  Â  Â  Â  Â  if (nikField) nikField.value = nik;
Â  Â  Â  Â  Â  Â  Â  Â  modal.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function openEmployeeOvertimeModal(nik) {
Â  Â  Â  Â  Â  Â  const modal = document.getElementById('overtimeModal');
Â  Â  Â  Â  Â  Â  if (modal) {
Â  Â  Â  Â  Â  Â  Â  Â  // Pre-fill NIK
Â  Â  Â  Â  Â  Â  Â  Â  const nikField = modal.querySelector('[name="nik"]');
Â  Â  Â  Â  Â  Â  Â  Â  if (nikField) nikField.value = nik;
Â  Â  Â  Â  Â  Â  Â  Â  modal.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function openLeaveModalWithNIK() {
Â  Â  Â  Â  Â  Â  const nikInput = document.getElementById('nikInput');
Â  Â  Â  Â  Â  Â  const nik = nikInput?.value?.trim();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!nik) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Masukkan NIK terlebih dahulu untuk mengajukan cuti/ijin', 'warning');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Validate employee exists
Â  Â  Â  Â  Â  Â  const employee = REFERENCE_EMPLOYEES.find(emp => emp.nik === nik) ||Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â employees.find(emp => emp.nik === nik && emp.status === 'aktif');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!employee) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('NIK tidak ditemukan. Gunakan NIK: EMP001 - EMP012', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const modal = document.getElementById('leaveRequestModal');
Â  Â  Â  Â  Â  Â  if (modal) {
Â  Â  Â  Â  Â  Â  Â  Â  // Pre-fill NIK and employee name
Â  Â  Â  Â  Â  Â  Â  Â  const nikField = modal.querySelector('[name="nik"]');
Â  Â  Â  Â  Â  Â  Â  Â  if (nikField) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nikField.value = nik;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nikField.readOnly = true;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Update modal title to show employee name
Â  Â  Â  Â  Â  Â  Â  Â  const modalTitle = modal.querySelector('h2');
Â  Â  Â  Â  Â  Â  Â  Â  if (modalTitle) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  modalTitle.innerHTML = `Pengajuan Cuti/Ijin - ${employee.nama}`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Reset calendar date and selected date
Â  Â  Â  Â  Â  Â  Â  Â  leaveCalendarDate = new Date();
Â  Â  Â  Â  Â  Â  Â  Â  const selectedDateInput = document.getElementById('selectedLeaveDate');
Â  Â  Â  Â  Â  Â  Â  Â  const selectedDateDisplay = document.getElementById('selectedLeaveDateDisplay');
Â  Â  Â  Â  Â  Â  Â  Â  if (selectedDateInput) selectedDateInput.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  if (selectedDateDisplay) selectedDateDisplay.textContent = '';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  modal.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Initialize calendar
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generateCalendar(leaveCalendarDate, 'leaveCalendarGrid', 'leave');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateCalendarHeader(leaveCalendarDate, 'currentMonthLeave');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setupCalendarNavigation('leave');
Â  Â  Â  Â  Â  Â  Â  Â  }, 100);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function openOvertimeModalWithNIK() {
Â  Â  Â  Â  Â  Â  const nikInput = document.getElementById('nikInput');
Â  Â  Â  Â  Â  Â  const nik = nikInput?.value?.trim();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!nik) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Masukkan NIK terlebih dahulu untuk melaporkan lembur', 'warning');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Validate employee exists
Â  Â  Â  Â  Â  Â  const employee = REFERENCE_EMPLOYEES.find(emp => emp.nik === nik) ||Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â employees.find(emp => emp.nik === nik && emp.status === 'aktif');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!employee) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('NIK tidak ditemukan. Gunakan NIK: EMP001 - EMP012', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const modal = document.getElementById('overtimeModal');
Â  Â  Â  Â  Â  Â  if (modal) {
Â  Â  Â  Â  Â  Â  Â  Â  // Pre-fill NIK and employee name
Â  Â  Â  Â  Â  Â  Â  Â  const nikField = modal.querySelector('[name="nik"]');
Â  Â  Â  Â  Â  Â  Â  Â  if (nikField) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nikField.value = nik;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nikField.readOnly = true;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Update modal title to show employee name
Â  Â  Â  Â  Â  Â  Â  Â  const modalTitle = modal.querySelector('h2');
Â  Â  Â  Â  Â  Â  Â  Â  if (modalTitle) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  modalTitle.innerHTML = `Laporan Lembur - ${employee.nama}`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Reset calendar date and selected date
Â  Â  Â  Â  Â  Â  Â  Â  overtimeCalendarDate = new Date();
Â  Â  Â  Â  Â  Â  Â  Â  const selectedDateInput = document.getElementById('selectedOvertimeDate');
Â  Â  Â  Â  Â  Â  Â  Â  const selectedDateDisplay = document.getElementById('selectedOvertimeDateDisplay');
Â  Â  Â  Â  Â  Â  Â  Â  const calculationDiv = document.getElementById('overtimeHoursCalculation');
Â  Â  Â  Â  Â  Â  Â  Â  if (selectedDateInput) selectedDateInput.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  if (selectedDateDisplay) selectedDateDisplay.textContent = '';
Â  Â  Â  Â  Â  Â  Â  Â  if (calculationDiv) calculationDiv.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  modal.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Initialize calendar and overtime calculation
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generateCalendar(overtimeCalendarDate, 'overtimeCalendarGrid', 'overtime');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateCalendarHeader(overtimeCalendarDate, 'currentMonthOvertime');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setupCalendarNavigation('overtime');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setupOvertimeCalculation();
Â  Â  Â  Â  Â  Â  Â  Â  }, 100);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function handleTakePhoto() {
Â  Â  Â  Â  Â  Â  const btn = document.getElementById('captureBtn');
Â  Â  Â  Â  Â  Â  if (!btn) return;

Â  Â  Â  Â  Â  Â  btn.disabled = true;
Â  Â  Â  Â  Â  Â  btn.innerHTML = '<div class="loading-spinner"></div><span>Memproses...</span>';

Â  Â  Â  Â  Â  Â  const photoData = await capturePhoto();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!photoData) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal mengambil foto', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = 'ðŸ“¸ Ambil Foto';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Use stored employee data
Â  Â  Â  Â  Â  Â  const employee = window.currentEmployee;
Â  Â  Â  Â  Â  Â  const attendanceType = window.attendanceType || 'checkin';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!employee) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Data karyawan tidak ditemukan', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = 'ðŸ“¸ Ambil Foto';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  const today = new Date().toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Get today's roster
Â  Â  Â  Â  Â  Â  const todayRoster = rosters.find(r => r.nik === employee.nik && r.tanggal === today);
Â  Â  Â  Â  Â  Â  const scheduledShift = todayRoster ? todayRoster.shift_roster : employee.shift_tetap;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Check if employee is supposed to work today
Â  Â  Â  Â  Â  Â  if (todayRoster && (todayRoster.shift_roster === 'OFF' || todayRoster.shift_roster === 'CUTI' || todayRoster.shift_roster === 'IJIN')) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast(`Anda sedang ${todayRoster.shift_roster === 'OFF' ? 'libur' : todayRoster.shift_roster.toLowerCase()} hari ini`, 'warning');
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = 'ðŸ“¸ Ambil Foto';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const detectedShift = detectShift(now);
Â  Â  Â  Â  Â  Â  const status = getAttendanceStatus(detectedShift, scheduledShift, now);

Â  Â  Â  Â  Â  Â  const attendanceData = {
Â  Â  Â  Â  Â  Â  Â  Â  nik: employee.nik,
Â  Â  Â  Â  Â  Â  Â  Â  nama: employee.nama,
Â  Â  Â  Â  Â  Â  Â  Â  posisi: employee.posisi,
Â  Â  Â  Â  Â  Â  Â  Â  shift_tetap: employee.shift_tetap,
Â  Â  Â  Â  Â  Â  Â  Â  status: 'aktif',
Â  Â  Â  Â  Â  Â  Â  Â  waktu_absen: now.toISOString(),
Â  Â  Â  Â  Â  Â  Â  Â  shift_terdeteksi: detectedShift,
Â  Â  Â  Â  Â  Â  Â  Â  shift_jadwal: scheduledShift,
Â  Â  Â  Â  Â  Â  Â  Â  foto_data: photoData,
Â  Â  Â  Â  Â  Â  Â  Â  lokasi: 'Lokasi Kerja',
Â  Â  Â  Â  Â  Â  Â  Â  status_absen: status,
Â  Â  Â  Â  Â  Â  Â  Â  attendance_type: attendanceType,
Â  Â  Â  Â  Â  Â  Â  Â  type: 'attendance'
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  // If this is checkout, calculate work hours
Â  Â  Â  Â  Â  Â  if (attendanceType === 'checkout') {
Â  Â  Â  Â  Â  Â  Â  Â  const todayAttendances = attendances.filter(att => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const attDate = new Date(att.waktu_absen).toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return attDate === today && att.nik === employee.nik && att.attendance_type === 'checkin';
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  if (todayAttendances.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const checkinRecord = todayAttendances[0];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const checkinTime = new Date(checkinRecord.waktu_absen);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const checkoutTime = now;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const workMinutes = Math.round((checkoutTime - checkinTime) / (1000 * 60));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const workHoursDecimal = workMinutes / 60;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Save work hours record
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const workHoursData = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nik: employee.nik,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nama: employee.nama,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tanggal: today,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  jam_masuk: checkinRecord.waktu_absen,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  jam_keluar: now.toISOString(),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  total_menit: workMinutes,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  total_jam: workHoursDecimal,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shift: detectedShift,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: 'work_hours'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await window.dataSdk.create(workHoursData);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.create(attendanceData);

Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  stopCamera();
Â  Â  Â  Â  Â  Â  Â  Â  showToast(`${attendanceType === 'checkout' ? 'Absen pulang' : 'Absen masuk'} berhasil dicatat!`, 'success');
Â  Â  Â  Â  Â  Â  Â  Â  currentView = 'success';
Â  Â  Â  Â  Â  Â  Â  Â  window.lastAttendanceType = attendanceType;
Â  Â  Â  Â  Â  Â  Â  Â  await render();
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal menyimpan absensi', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = 'ðŸ“¸ Ambil Foto';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function handleBackToAttendance() {
Â  Â  Â  Â  Â  Â  stopCamera();
Â  Â  Â  Â  Â  Â  currentView = 'attendance';
Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  }

Â  Â  Â  Â  function handleBackToEmployeeDashboard() {
Â  Â  Â  Â  Â  Â  currentView = 'employee_dashboard';
Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  }

Â  Â  Â  Â  function handleBackToLogin() {
Â  Â  Â  Â  Â  Â  currentView = 'login';
Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  }

Â  Â  Â  Â  async function handleAddEmployee() {
Â  Â  Â  Â  Â  Â  const form = document.getElementById('employeeForm');
Â  Â  Â  Â  Â  Â  if (!form) return;

Â  Â  Â  Â  Â  Â  const formData = new FormData(form);
Â  Â  Â  Â  Â  Â  const employeeData = {
Â  Â  Â  Â  Â  Â  Â  Â  nik: formData.get('nik'),
Â  Â  Â  Â  Â  Â  Â  Â  nama: formData.get('nama'),
Â  Â  Â  Â  Â  Â  Â  Â  posisi: formData.get('posisi'),
Â  Â  Â  Â  Â  Â  Â  Â  shift_tetap: formData.get('shift_tetap'),
Â  Â  Â  Â  Â  Â  Â  Â  email: formData.get('email'),
Â  Â  Â  Â  Â  Â  Â  Â  telepon: formData.get('telepon'),
Â  Â  Â  Â  Â  Â  Â  Â  alamat: formData.get('alamat'),
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_lahir: formData.get('tanggal_lahir'),
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: formData.get('tanggal_bergabung'),
Â  Â  Â  Â  Â  Â  Â  Â  pendidikan: formData.get('pendidikan'),
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: formData.get('status_pernikahan'),
Â  Â  Â  Â  Â  Â  Â  Â  kontak_darurat: formData.get('kontak_darurat'),
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: formData.get('foto_profil') || generateDefaultAvatar(formData.get('nama')),
Â  Â  Â  Â  Â  Â  Â  Â  status: 'aktif',
Â  Â  Â  Â  Â  Â  Â  Â  type: 'employee'
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  // Check if NIK already exists
Â  Â  Â  Â  Â  Â  const exists = employees.some(emp => emp.nik === employeeData.nik);
Â  Â  Â  Â  Â  Â  if (exists) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('NIK sudah terdaftar', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.create(employeeData);

Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Profil karyawan berhasil ditambahkan', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  form.reset();
Â  Â  Â  Â  Â  Â  Â  Â  closeModal('addEmployeeModal');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal menambahkan profil karyawan', 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function handleEditEmployee() {
Â  Â  Â  Â  Â  Â  const form = document.getElementById('editEmployeeForm');
Â  Â  Â  Â  Â  Â  if (!form) return;

Â  Â  Â  Â  Â  Â  const btn = form.querySelector('button[type="submit"]');
Â  Â  Â  Â  Â  Â  btn.disabled = true;
Â  Â  Â  Â  Â  Â  btn.innerHTML = '<div class="loading-spinner"></div><span>Menyimpan...</span>';

Â  Â  Â  Â  Â  Â  const formData = new FormData(form);
Â  Â  Â  Â  Â  Â  const employeeId = formData.get('employee_id');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Find the employee record
Â  Â  Â  Â  Â  Â  const employee = allRecords.find(r => r.__backendId === employeeId);
Â  Â  Â  Â  Â  Â  if (!employee) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Data karyawan tidak ditemukan', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = 'Simpan Perubahan';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Update employee data
Â  Â  Â  Â  Â  Â  const updatedEmployee = {
Â  Â  Â  Â  Â  Â  Â  Â  ...employee,
Â  Â  Â  Â  Â  Â  Â  Â  nama: formData.get('nama'),
Â  Â  Â  Â  Â  Â  Â  Â  posisi: formData.get('posisi'),
Â  Â  Â  Â  Â  Â  Â  Â  shift_tetap: formData.get('shift_tetap'),
Â  Â  Â  Â  Â  Â  Â  Â  email: formData.get('email'),
Â  Â  Â  Â  Â  Â  Â  Â  telepon: formData.get('telepon'),
Â  Â  Â  Â  Â  Â  Â  Â  alamat: formData.get('alamat'),
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_lahir: formData.get('tanggal_lahir'),
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_bergabung: formData.get('tanggal_bergabung'),
Â  Â  Â  Â  Â  Â  Â  Â  pendidikan: formData.get('pendidikan'),
Â  Â  Â  Â  Â  Â  Â  Â  status_pernikahan: formData.get('status_pernikahan'),
Â  Â  Â  Â  Â  Â  Â  Â  kontak_darurat: formData.get('kontak_darurat'),
Â  Â  Â  Â  Â  Â  Â  Â  foto_profil: formData.get('foto_profil') || employee.foto_profil || generateDefaultAvatar(formData.get('nama'))
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.update(updatedEmployee);

Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Profil karyawan berhasil diperbarui', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  closeModal('editEmployeeModal');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal memperbarui profil karyawan', 'error');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  btn.innerHTML = 'Simpan Perubahan';
Â  Â  Â  Â  }

Â  Â  Â  Â  function generateDefaultAvatar(nama) {
Â  Â  Â  Â  Â  Â  const colors = ['#6366f1', '#ec4899', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#06994f', '#d946ef', '#3b82f6', '#f97316', '#14b8a6'];
Â  Â  Â  Â  Â  Â  const colorIndex = (nama?.length || 0) % colors.length;
Â  Â  Â  Â  Â  Â  const color = colors[colorIndex];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return `data:image/svg+xml;base64,${btoa(`<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="50" fill="${color}"/><circle cx="50" cy="35" r="15" fill="white"/><path d="M20 75c0-16 13.43-30 30-30s30 14 30 30v10H20V75z" fill="white"/></svg>`)}`;
Â  Â  Â  Â  }

Â  Â  Â  Â  function openEditEmployeeModal(employee) {
Â  Â  Â  Â  Â  Â  const modal = document.getElementById('editEmployeeModal');
Â  Â  Â  Â  Â  Â  if (!modal) return;

Â  Â  Â  Â  Â  Â  // Populate form with employee data
Â  Â  Â  Â  Â  Â  const form = document.getElementById('editEmployeeForm');
Â  Â  Â  Â  Â  Â  if (form) {
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="employee_id"]').value = employee.__backendId || '';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="nik"]').value = employee.nik || '';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="nama"]').value = employee.nama || '';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="posisi"]').value = employee.posisi || '';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="shift_tetap"]').value = employee.shift_tetap || '1';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="email"]').value = employee.email || '';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="telepon"]').value = employee.telepon || '';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="alamat"]').value = employee.alamat || '';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="tanggal_lahir"]').value = employee.tanggal_lahir || '';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="tanggal_bergabung"]').value = employee.tanggal_bergabung || '';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="pendidikan"]').value = employee.pendidikan || '';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="status_pernikahan"]').value = employee.status_pernikahan || 'Belum Menikah';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="kontak_darurat"]').value = employee.kontak_darurat || '';
Â  Â  Â  Â  Â  Â  Â  Â  form.querySelector('[name="foto_profil"]').value = employee.foto_profil || '';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  modal.classList.remove('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  async function handleDeleteEmployee(record) {
Â  Â  Â  Â  Â  Â  const confirmBtn = document.getElementById(`confirm-delete-${record.__backendId}`);
Â  Â  Â  Â  Â  Â  if (!confirmBtn) return;

Â  Â  Â  Â  Â  Â  confirmBtn.disabled = true;
Â  Â  Â  Â  Â  Â  confirmBtn.innerHTML = '<div class="loading-spinner"></div>';

Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.delete(record);

Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Karyawan berhasil dihapus', 'success');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal menghapus karyawan', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  confirmBtn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  confirmBtn.innerHTML = 'Ya, Hapus';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function showDeleteConfirm(recordId) {
Â  Â  Â  Â  Â  Â  const btn = document.getElementById(`delete-btn-${recordId}`);
Â  Â  Â  Â  Â  Â  const confirmDiv = document.getElementById(`confirm-delete-div-${recordId}`);
Â  Â  Â  Â  Â  Â  if (btn && confirmDiv) {
Â  Â  Â  Â  Â  Â  Â  Â  btn.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  confirmDiv.style.display = 'flex';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function hideDeleteConfirm(recordId) {
Â  Â  Â  Â  Â  Â  const btn = document.getElementById(`delete-btn-${recordId}`);
Â  Â  Â  Â  Â  Â  const confirmDiv = document.getElementById(`confirm-delete-div-${recordId}`);
Â  Â  Â  Â  Â  Â  if (btn && confirmDiv) {
Â  Â  Â  Â  Â  Â  Â  Â  btn.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  confirmDiv.style.display = 'none';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function openEditRosterModal(recordId, nik, nama, tanggal, currentShift) {
Â  Â  Â  Â  Â  Â  const modal = document.getElementById('editRosterModal');
Â  Â  Â  Â  Â  Â  if (!modal) return;

Â  Â  Â  Â  Â  Â  const config = window.elementSdk?.config || defaultConfig;
Â  Â  Â  Â  Â  Â  const baseSize = config.font_size || defaultConfig.font_size;

Â  Â  Â  Â  Â  Â  // Format tanggal untuk display
Â  Â  Â  Â  Â  Â  const date = new Date(tanggal);
Â  Â  Â  Â  Â  Â  const dayNames = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
Â  Â  Â  Â  Â  Â  const monthNames = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
Â  Â  Â  Â  Â  Â  const formattedDate = `${dayNames[date.getDay()]}, ${date.getDate()} ${monthNames[date.getMonth()]} ${date.getFullYear()}`;

Â  Â  Â  Â  Â  Â  modal.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="fixed inset-0 z-50 flex items-center justify-center p-6 modal-backdrop">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 max-w-md w-full shadow-2xl fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-6" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Edit Roster Karyawan</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6 p-4 rounded-lg" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="font-semibold mb-1" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color}">${nama}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">${nik}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium mt-2" style="font-size: ${baseSize}px; color: ${config.primary_color}">${formattedDate}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form id="editRosterForm" onsubmit="event.preventDefault(); handleEditRoster('${recordId}');">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-3" style="font-size: ${baseSize}px; color: ${config.text_color}">Pilih Shift/Status:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="flex items-center p-3 rounded-lg border-2 cursor-pointer hover:bg-gray-50" style="border-color: ${currentShift === '1' ? config.primary_color : '#e2e8f0'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" name="shift_roster" value="1" ${currentShift === '1' ? 'checked' : ''} class="mr-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="shift-badge shift-1" style="font-size: ${baseSize * 0.8}px">${config.shift1_label || 'Shift Pagi'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.85}px; color: ${config.secondary_color}">08:00 - 16:00</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="flex items-center p-3 rounded-lg border-2 cursor-pointer hover:bg-gray-50" style="border-color: ${currentShift === '2' ? config.primary_color : '#e2e8f0'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" name="shift_roster" value="2" ${currentShift === '2' ? 'checked' : ''} class="mr-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="shift-badge shift-2" style="font-size: ${baseSize * 0.8}px">${config.shift2_label || 'Shift Sore'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.85}px; color: ${config.secondary_color}">16:00 - 24:00</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="flex items-center p-3 rounded-lg border-2 cursor-pointer hover:bg-gray-50" style="border-color: ${currentShift === '3' ? config.primary_color : '#e2e8f0'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" name="shift_roster" value="3" ${currentShift === '3' ? 'checked' : ''} class="mr-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="shift-badge shift-3" style="font-size: ${baseSize * 0.8}px">${config.shift3_label || 'Shift Malam'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.85}px; color: ${config.secondary_color}">00:00 - 08:00</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="flex items-center p-3 rounded-lg border-2 cursor-pointer hover:bg-gray-50" style="border-color: ${currentShift === 'OFF' ? config.primary_color : '#e2e8f0'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" name="shift_roster" value="OFF" ${currentShift === 'OFF' ? 'checked' : ''} class="mr-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="shift-badge shift-off" style="font-size: ${baseSize * 0.8}px">LIBUR</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.85}px; color: ${config.secondary_color}">Hari libur</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="flex items-center p-3 rounded-lg border-2 cursor-pointer hover:bg-gray-50" style="border-color: ${currentShift === 'CUTI' ? config.primary_color : '#e2e8f0'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" name="shift_roster" value="CUTI" ${currentShift === 'CUTI' ? 'checked' : ''} class="mr-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="background-color: #fef3c7; color: #92400e; padding: 4px 10px; border-radius: 12px; font-size: ${baseSize * 0.8}px; font-weight: 600;">CUTI</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.85}px; color: ${config.secondary_color}">Cuti/Izin</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="closeModal('editRosterModal')" class="flex-1 px-4 py-3 rounded-lg font-semibold" style="background-color: #e2e8f0; color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Batal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="flex-1 px-4 py-3 rounded-lg font-semibold text-white" style="background-color: ${config.primary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Simpan Perubahan
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  modal.classList.remove('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  async function handleEditRoster(recordId) {
Â  Â  Â  Â  Â  Â  const form = document.getElementById('editRosterForm');
Â  Â  Â  Â  Â  Â  if (!form) return;

Â  Â  Â  Â  Â  Â  const btn = form.querySelector('button[type="submit"]');
Â  Â  Â  Â  Â  Â  btn.disabled = true;
Â  Â  Â  Â  Â  Â  btn.innerHTML = '<div class="loading-spinner"></div><span>Menyimpan...</span>';

Â  Â  Â  Â  Â  Â  const formData = new FormData(form);
Â  Â  Â  Â  Â  Â  const newShift = formData.get('shift_roster');

Â  Â  Â  Â  Â  Â  // Find the roster record
Â  Â  Â  Â  Â  Â  const rosterRecord = allRecords.find(r => r.__backendId === recordId);
Â  Â  Â  Â  Â  Â  if (!rosterRecord) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Data roster tidak ditemukan', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = 'Simpan Perubahan';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Update roster data
Â  Â  Â  Â  Â  Â  const updatedRoster = {
Â  Â  Â  Â  Â  Â  Â  Â  ...rosterRecord,
Â  Â  Â  Â  Â  Â  Â  Â  shift_roster: newShift,
Â  Â  Â  Â  Â  Â  Â  Â  keterangan: newShift === 'OFF' ? 'Libur (2 dari 7 hari)' :Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â newShift === 'CUTI' ? 'Cuti Tahunan' :Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â newShift === 'IJIN' ? 'Ijin Khusus' :
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â `Jadwal ${getShiftLabel(newShift)} - 8 jam kerja`
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.update(updatedRoster);

Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Roster berhasil diperbarui', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  closeModal('editRosterModal');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal memperbarui roster', 'error');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  btn.innerHTML = 'Simpan Perubahan';
Â  Â  Â  Â  }

Â  Â  Â  Â  async function handleLeaveRequest() {
Â  Â  Â  Â  Â  Â  const form = document.getElementById('leaveRequestForm');
Â  Â  Â  Â  Â  Â  if (!form) return;

Â  Â  Â  Â  Â  Â  const btn = form.querySelector('button[type="submit"]');
Â  Â  Â  Â  Â  Â  btn.disabled = true;
Â  Â  Â  Â  Â  Â  btn.innerHTML = '<div class="loading-spinner"></div><span>Mengajukan...</span>';

Â  Â  Â  Â  Â  Â  const formData = new FormData(form);
Â  Â  Â  Â  Â  Â  const nik = formData.get('nik');

Â  Â  Â  Â  Â  Â  // Validate employee exists
Â  Â  Â  Â  Â  Â  const employee = REFERENCE_EMPLOYEES.find(emp => emp.nik === nik) ||Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â employees.find(emp => emp.nik === nik && emp.status === 'aktif');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!employee) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('NIK tidak ditemukan', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = 'Ajukan';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const leaveData = {
Â  Â  Â  Â  Â  Â  Â  Â  nik: nik,
Â  Â  Â  Â  Â  Â  Â  Â  nama: employee.nama,
Â  Â  Â  Â  Â  Â  Â  Â  posisi: employee.posisi,
Â  Â  Â  Â  Â  Â  Â  Â  leave_type: formData.get('leave_type'),
Â  Â  Â  Â  Â  Â  Â  Â  tanggal: formData.get('tanggal'),
Â  Â  Â  Â  Â  Â  Â  Â  alasan: formData.get('alasan'),
Â  Â  Â  Â  Â  Â  Â  Â  status: 'pending', // pending, approved, rejected
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_pengajuan: new Date().toISOString(),
Â  Â  Â  Â  Â  Â  Â  Â  type: 'leave_request'
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.create(leaveData);

Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Pengajuan cuti/ijin berhasil dikirim', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  form.reset();
Â  Â  Â  Â  Â  Â  Â  Â  closeModal('leaveRequestModal');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal mengirim pengajuan', 'error');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  btn.innerHTML = 'Ajukan';
Â  Â  Â  Â  }

Â  Â  Â  Â  // Calendar state variables
Â  Â  Â  Â  let leaveCalendarDate = new Date();
Â  Â  Â  Â  let overtimeCalendarDate = new Date();

Â  Â  Â  Â  function initializeCalendars() {
Â  Â  Â  Â  Â  Â  // Initialize leave calendar
Â  Â  Â  Â  Â  Â  const leaveModal = document.getElementById('leaveRequestModal');
Â  Â  Â  Â  Â  Â  if (leaveModal && !leaveModal.classList.contains('hidden')) {
Â  Â  Â  Â  Â  Â  Â  Â  generateCalendar(leaveCalendarDate, 'leaveCalendarGrid', 'leave');
Â  Â  Â  Â  Â  Â  Â  Â  updateCalendarHeader(leaveCalendarDate, 'currentMonthLeave');
Â  Â  Â  Â  Â  Â  Â  Â  setupCalendarNavigation('leave');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Initialize overtime calendar
Â  Â  Â  Â  Â  Â  const overtimeModal = document.getElementById('overtimeModal');
Â  Â  Â  Â  Â  Â  if (overtimeModal && !overtimeModal.classList.contains('hidden')) {
Â  Â  Â  Â  Â  Â  Â  Â  generateCalendar(overtimeCalendarDate, 'overtimeCalendarGrid', 'overtime');
Â  Â  Â  Â  Â  Â  Â  Â  updateCalendarHeader(overtimeCalendarDate, 'currentMonthOvertime');
Â  Â  Â  Â  Â  Â  Â  Â  setupCalendarNavigation('overtime');
Â  Â  Â  Â  Â  Â  Â  Â  setupOvertimeCalculation();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function setupCalendarNavigation(type) {
Â  Â  Â  Â  Â  Â  const prevBtn = document.getElementById(`prevMonth${type === 'leave' ? 'Leave' : 'Overtime'}`);
Â  Â  Â  Â  Â  Â  const nextBtn = document.getElementById(`nextMonth${type === 'leave' ? 'Leave' : 'Overtime'}`);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (prevBtn) {
Â  Â  Â  Â  Â  Â  Â  Â  prevBtn.onclick = () => navigateCalendar(type, -1);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (nextBtn) {
Â  Â  Â  Â  Â  Â  Â  Â  nextBtn.onclick = () => navigateCalendar(type, 1);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function setupOvertimeCalculation() {
Â  Â  Â  Â  Â  Â  const jamMulai = document.querySelector('#overtimeForm [name="jam_mulai"]');
Â  Â  Â  Â  Â  Â  const jamSelesai = document.querySelector('#overtimeForm [name="jam_selesai"]');
Â  Â  Â  Â  Â  Â  const shiftSelect = document.querySelector('#overtimeForm [name="shift_lembur"]');

Â  Â  Â  Â  Â  Â  if (jamMulai && jamSelesai && shiftSelect) {
Â  Â  Â  Â  Â  Â  Â  Â  const calculateHours = () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (jamMulai.value && jamSelesai.value) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const startTime = new Date(`2000-01-01T${jamMulai.value}:00`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const endTime = new Date(`2000-01-01T${jamSelesai.value}:00`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Handle overnight overtime
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (endTime < startTime) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  endTime.setDate(endTime.getDate() + 1);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const overtimeMinutes = (endTime - startTime) / (1000 * 60);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const overtimeHours = overtimeMinutes / 60;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Calculate rate based on shift type
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let rate = 1.5; // Default rate
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const shiftType = shiftSelect.value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (shiftType === 'weekend') rate = 2.0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (shiftType === 'holiday') rate = 2.5;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const points = Math.round(overtimeHours * rate * 10);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Update display
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const calculationDiv = document.getElementById('overtimeHoursCalculation');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const totalHoursEl = document.getElementById('totalOvertimeHours');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const rateEl = document.getElementById('overtimeRate');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const pointsEl = document.getElementById('overtimePoints');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (calculationDiv && totalHoursEl && rateEl && pointsEl) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  calculationDiv.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  totalHoursEl.textContent = overtimeHours.toFixed(1);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rateEl.textContent = `${rate}x`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pointsEl.textContent = points;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  jamMulai.addEventListener('change', calculateHours);
Â  Â  Â  Â  Â  Â  Â  Â  jamSelesai.addEventListener('change', calculateHours);
Â  Â  Â  Â  Â  Â  Â  Â  shiftSelect.addEventListener('change', calculateHours);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function navigateCalendar(type, direction) {
Â  Â  Â  Â  Â  Â  if (type === 'leave') {
Â  Â  Â  Â  Â  Â  Â  Â  leaveCalendarDate.setMonth(leaveCalendarDate.getMonth() + direction);
Â  Â  Â  Â  Â  Â  Â  Â  generateCalendar(leaveCalendarDate, 'leaveCalendarGrid', 'leave');
Â  Â  Â  Â  Â  Â  Â  Â  updateCalendarHeader(leaveCalendarDate, 'currentMonthLeave');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  overtimeCalendarDate.setMonth(overtimeCalendarDate.getMonth() + direction);
Â  Â  Â  Â  Â  Â  Â  Â  generateCalendar(overtimeCalendarDate, 'overtimeCalendarGrid', 'overtime');
Â  Â  Â  Â  Â  Â  Â  Â  updateCalendarHeader(overtimeCalendarDate, 'currentMonthOvertime');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateCalendarHeader(date, headerId) {
Â  Â  Â  Â  Â  Â  const header = document.getElementById(headerId);
Â  Â  Â  Â  Â  Â  if (header) {
Â  Â  Â  Â  Â  Â  Â  Â  const monthNames = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
Â  Â  Â  Â  Â  Â  Â  Â  header.textContent = `${monthNames[date.getMonth()]} ${date.getFullYear()}`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function selectCalendarDate(dateStr, type) {
Â  Â  Â  Â  Â  Â  const selectedDate = new Date(dateStr);
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  today.setHours(0, 0, 0, 0);
Â  Â  Â  Â  Â  Â  selectedDate.setHours(0, 0, 0, 0);

Â  Â  Â  Â  Â  Â  // Prevent selecting past dates
Â  Â  Â  Â  Â  Â  if (selectedDate < today) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Tidak dapat memilih tanggal yang sudah lewat', 'warning');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (type === 'leave') {
Â  Â  Â  Â  Â  Â  Â  Â  const dateInput = document.getElementById('selectedLeaveDate');
Â  Â  Â  Â  Â  Â  Â  Â  const display = document.getElementById('selectedLeaveDateDisplay');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (dateInput) dateInput.value = dateStr;
Â  Â  Â  Â  Â  Â  Â  Â  if (display) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dayNames = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const monthNames = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display.textContent = `ðŸ“… ${dayNames[selectedDate.getDay()]}, ${selectedDate.getDate()} ${monthNames[selectedDate.getMonth()]} ${selectedDate.getFullYear()}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else if (type === 'overtime') {
Â  Â  Â  Â  Â  Â  Â  Â  const dateInput = document.getElementById('selectedOvertimeDate');
Â  Â  Â  Â  Â  Â  Â  Â  const display = document.getElementById('selectedOvertimeDateDisplay');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (dateInput) dateInput.value = dateStr;
Â  Â  Â  Â  Â  Â  Â  Â  if (display) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dayNames = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const monthNames = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display.textContent = `â° ${dayNames[selectedDate.getDay()]}, ${selectedDate.getDate()} ${monthNames[selectedDate.getMonth()]} ${selectedDate.getFullYear()}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Update calendar display to show selected date
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  generateCalendar(type === 'leave' ? leaveCalendarDate : overtimeCalendarDate,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â type === 'leave' ? 'leaveCalendarGrid' : 'overtimeCalendarGrid',Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â type);
Â  Â  Â  Â  Â  Â  }, 50);
Â  Â  Â  Â  }

Â  Â  Â  Â  function generateCalendar(date, gridId, type) {
Â  Â  Â  Â  Â  Â  const grid = document.getElementById(gridId);
Â  Â  Â  Â  Â  Â  if (!grid) return;

Â  Â  Â  Â  Â  Â  const config = window.elementSdk?.config || defaultConfig;
Â  Â  Â  Â  Â  Â  const baseSize = config.font_size || defaultConfig.font_size;

Â  Â  Â  Â  Â  Â  const year = date.getFullYear();
Â  Â  Â  Â  Â  Â  const month = date.getMonth();
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  today.setHours(0, 0, 0, 0);

Â  Â  Â  Â  Â  Â  // Get first day of month and number of days
Â  Â  Â  Â  Â  Â  const firstDay = new Date(year, month, 1);
Â  Â  Â  Â  Â  Â  const lastDay = new Date(year, month + 1, 0);
Â  Â  Â  Â  Â  Â  const daysInMonth = lastDay.getDate();
Â  Â  Â  Â  Â  Â  const startingDayOfWeek = firstDay.getDay();

Â  Â  Â  Â  Â  Â  // Get selected date
Â  Â  Â  Â  Â  Â  const selectedDateInput = document.getElementById(type === 'leave' ? 'selectedLeaveDate' : 'selectedOvertimeDate');
Â  Â  Â  Â  Â  Â  const selectedDateStr = selectedDateInput ? selectedDateInput.value : '';

Â  Â  Â  Â  Â  Â  let html = '';

Â  Â  Â  Â  Â  Â  // Add empty cells for days before the first day of the month
Â  Â  Â  Â  Â  Â  for (let i = 0; i < startingDayOfWeek; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  html += `<div class="calendar-day" style="opacity: 0.3;"></div>`;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Add days of the month
Â  Â  Â  Â  Â  Â  for (let day = 1; day <= daysInMonth; day++) {
Â  Â  Â  Â  Â  Â  Â  Â  const currentDate = new Date(year, month, day);
Â  Â  Â  Â  Â  Â  Â  Â  const dateStr = currentDate.toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â  Â  Â  const isToday = currentDate.getTime() === today.getTime();
Â  Â  Â  Â  Â  Â  Â  Â  const isSelected = dateStr === selectedDateStr;
Â  Â  Â  Â  Â  Â  Â  Â  const isPast = currentDate < today;
Â  Â  Â  Â  Â  Â  Â  Â  const isWeekend = currentDate.getDay() === 0 || currentDate.getDay() === 6;

Â  Â  Â  Â  Â  Â  Â  Â  let cellClass = 'calendar-day transition-all duration-200';
Â  Â  Â  Â  Â  Â  Â  Â  let cellStyle = `font-size: ${baseSize * 0.85}px; min-height: 40px;`;

Â  Â  Â  Â  Â  Â  Â  Â  if (isPast) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellClass += ' opacity-40 cursor-not-allowed';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += `background-color: #f1f5f9; color: ${config.secondary_color};`;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellClass += ' cursor-pointer hover:opacity-80';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isSelected) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += `background-color: ${type === 'leave' ? config.primary_color : '#f59e0b'}; color: white; font-weight: bold; border: 2px solid ${type === 'leave' ? config.primary_color : '#f59e0b'};`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (isToday) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += `background-color: ${config.background_color}; color: ${config.primary_color}; border: 2px solid ${config.primary_color}; font-weight: bold;`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (isWeekend) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += `background-color: #fef3c7; color: #92400e; border: 1px solid #fbbf24;`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += `background-color: ${config.surface_color}; color: ${config.text_color}; border: 1px solid #e2e8f0;`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  const clickHandler = isPast ? '' : `onclick="selectCalendarDate('${dateStr}', '${type}')"`;

Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="${cellClass}" style="${cellStyle}" ${clickHandler}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex flex-col items-center justify-center h-full p-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold">${day}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${isToday ? '<div style="font-size: 8px; margin-top: 2px;">Hari ini</div>' : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${isWeekend && !isPast && !isToday ? '<div style="font-size: 8px; margin-top: 2px;">Weekend</div>' : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${isSelected ? '<div style="font-size: 8px; margin-top: 2px;">âœ“ Dipilih</div>' : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  grid.innerHTML = html;
Â  Â  Â  Â  }

Â  Â  Â  Â  async function handleOvertimeReport() {
Â  Â  Â  Â  Â  Â  const form = document.getElementById('overtimeForm');
Â  Â  Â  Â  Â  Â  if (!form) return;

Â  Â  Â  Â  Â  Â  const btn = form.querySelector('button[type="submit"]');
Â  Â  Â  Â  Â  Â  btn.disabled = true;
Â  Â  Â  Â  Â  Â  btn.innerHTML = '<div class="loading-spinner"></div><span>Melaporkan...</span>';

Â  Â  Â  Â  Â  Â  const formData = new FormData(form);
Â  Â  Â  Â  Â  Â  const nik = formData.get('nik');

Â  Â  Â  Â  Â  Â  // Validate employee exists
Â  Â  Â  Â  Â  Â  const employee = REFERENCE_EMPLOYEES.find(emp => emp.nik === nik) ||Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â employees.find(emp => emp.nik === nik && emp.status === 'aktif');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!employee) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('NIK tidak ditemukan', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = 'Laporkan Lembur';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Calculate overtime hours
Â  Â  Â  Â  Â  Â  const jamMulai = formData.get('jam_mulai');
Â  Â  Â  Â  Â  Â  const jamSelesai = formData.get('jam_selesai');
Â  Â  Â  Â  Â  Â  const shiftLembur = formData.get('shift_lembur');
Â  Â  Â  Â  Â  Â  const startTime = new Date(`2000-01-01T${jamMulai}:00`);
Â  Â  Â  Â  Â  Â  const endTime = new Date(`2000-01-01T${jamSelesai}:00`);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Handle overnight overtime
Â  Â  Â  Â  Â  Â  if (endTime < startTime) {
Â  Â  Â  Â  Â  Â  Â  Â  endTime.setDate(endTime.getDate() + 1);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const overtimeMinutes = (endTime - startTime) / (1000 * 60);
Â  Â  Â  Â  Â  Â  const overtimeHours = overtimeMinutes / 60;

Â  Â  Â  Â  Â  Â  // Calculate rate based on shift type
Â  Â  Â  Â  Â  Â  let rate = 1.5;
Â  Â  Â  Â  Â  Â  if (shiftLembur === 'weekend') rate = 2.0;
Â  Â  Â  Â  Â  Â  if (shiftLembur === 'holiday') rate = 2.5;

Â  Â  Â  Â  Â  Â  const overtimeData = {
Â  Â  Â  Â  Â  Â  Â  Â  nik: nik,
Â  Â  Â  Â  Â  Â  Â  Â  nama: employee.nama,
Â  Â  Â  Â  Â  Â  Â  Â  posisi: employee.posisi,
Â  Â  Â  Â  Â  Â  Â  Â  tanggal: formData.get('tanggal'),
Â  Â  Â  Â  Â  Â  Â  Â  jam_mulai: jamMulai,
Â  Â  Â  Â  Â  Â  Â  Â  jam_selesai: jamSelesai,
Â  Â  Â  Â  Â  Â  Â  Â  shift_lembur: shiftLembur,
Â  Â  Â  Â  Â  Â  Â  Â  total_jam_lembur: overtimeHours,
Â  Â  Â  Â  Â  Â  Â  Â  rate_lembur: rate,
Â  Â  Â  Â  Â  Â  Â  Â  poin_lembur: Math.round(overtimeHours * rate * 10),
Â  Â  Â  Â  Â  Â  Â  Â  pekerjaan: formData.get('pekerjaan'),
Â  Â  Â  Â  Â  Â  Â  Â  status: 'pending', // pending, approved, rejected
Â  Â  Â  Â  Â  Â  Â  Â  tanggal_laporan: new Date().toISOString(),
Â  Â  Â  Â  Â  Â  Â  Â  type: 'overtime_report'
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.create(overtimeData);

Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast(`Laporan lembur ${overtimeHours.toFixed(1)} jam (${rate}x rate) berhasil dikirim`, 'success');
Â  Â  Â  Â  Â  Â  Â  Â  form.reset();
Â  Â  Â  Â  Â  Â  Â  Â  closeModal('overtimeModal');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal mengirim laporan lembur', 'error');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  btn.innerHTML = 'Laporkan Lembur';
Â  Â  Â  Â  }

Â  Â  Â  Â  function openModal(modalId) {
Â  Â  Â  Â  Â  Â  const modal = document.getElementById(modalId);
Â  Â  Â  Â  Â  Â  if (modal) {
Â  Â  Â  Â  Â  Â  Â  Â  modal.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Initialize calendars when modals are opened
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (modalId === 'leaveRequestModal') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generateCalendar(leaveCalendarDate, 'leaveCalendarGrid', 'leave');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateCalendarHeader(leaveCalendarDate, 'currentMonthLeave');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setupCalendarNavigation('leave');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (modalId === 'overtimeModal') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generateCalendar(overtimeCalendarDate, 'overtimeCalendarGrid', 'overtime');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateCalendarHeader(overtimeCalendarDate, 'currentMonthOvertime');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setupCalendarNavigation('overtime');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setupOvertimeCalculation();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }, 100);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function closeModal(modalId) {
Â  Â  Â  Â  Â  Â  const modal = document.getElementById(modalId);
Â  Â  Â  Â  Â  Â  if (modal) {
Â  Â  Â  Â  Â  Â  Â  Â  modal.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Reset form and modal state when closing
Â  Â  Â  Â  Â  Â  Â  Â  const form = modal.querySelector('form');
Â  Â  Â  Â  Â  Â  Â  Â  if (form) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  form.reset();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Reset NIK field to be editable again
Â  Â  Â  Â  Â  Â  Â  Â  const nikField = modal.querySelector('[name="nik"]');
Â  Â  Â  Â  Â  Â  Â  Â  if (nikField) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nikField.readOnly = false;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Reset modal title
Â  Â  Â  Â  Â  Â  Â  Â  const modalTitle = modal.querySelector('h2');
Â  Â  Â  Â  Â  Â  Â  Â  if (modalTitle) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (modalId === 'leaveRequestModal') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  modalTitle.innerHTML = 'Pengajuan Cuti/Ijin';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (modalId === 'overtimeModal') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  modalTitle.innerHTML = 'Laporan Lembur';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function filterAttendance() {
Â  Â  Â  Â  Â  Â  const dateFilter = document.getElementById('dateFilter')?.value;
Â  Â  Â  Â  Â  Â  const shiftFilter = document.getElementById('shiftFilter')?.value;
Â  Â  Â  Â  Â  Â  const nikFilter = document.getElementById('nikFilter')?.value;

Â  Â  Â  Â  Â  Â  let filtered = [...attendances];

Â  Â  Â  Â  Â  Â  if (dateFilter) {
Â  Â  Â  Â  Â  Â  Â  Â  filtered = filtered.filter(att => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const attDate = new Date(att.waktu_absen).toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return attDate === dateFilter;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (shiftFilter) {
Â  Â  Â  Â  Â  Â  Â  Â  filtered = filtered.filter(att => att.shift_terdeteksi === shiftFilter);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (nikFilter) {
Â  Â  Â  Â  Â  Â  Â  Â  filtered = filtered.filter(att =>Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  att.nik.toLowerCase().includes(nikFilter.toLowerCase()) ||
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  att.nama.toLowerCase().includes(nikFilter.toLowerCase())
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  renderAttendanceList(filtered);
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderAttendanceList(filteredAttendances) {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('attendanceList');
Â  Â  Â  Â  Â  Â  if (!container) return;

Â  Â  Â  Â  Â  Â  if (filteredAttendances.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center py-12">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-6xl mb-4">ðŸ“‹</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-lg" style="color: ${window.elementSdk?.config?.secondary_color || defaultConfig.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Tidak ada data absensi
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  container.innerHTML = filteredAttendances.map(att => `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white rounded-xl p-6 shadow-sm card-hover fade-in" style="background-color: ${window.elementSdk?.config?.surface_color || defaultConfig.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${att.foto_data}" alt="Foto ${att.nama}" class="w-24 h-24 rounded-lg object-cover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-start justify-between mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="font-bold text-lg" style="color: ${window.elementSdk?.config?.text_color || defaultConfig.text_color}">${att.nama}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm" style="color: ${window.elementSdk?.config?.secondary_color || defaultConfig.secondary_color}">${att.nik} â€¢ ${att.posisi}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="status-badge status-${att.status_absen}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${att.status_absen === 'hadir' ? 'âœ“ Hadir' : att.status_absen === 'terlambat' ? 'â° Terlambat' : 'âš  Tidak Sesuai Jadwal'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex flex-wrap gap-3 mt-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">ðŸ•</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-sm font-medium" style="color: ${window.elementSdk?.config?.text_color || defaultConfig.text_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${formatDate(att.waktu_absen)} ${formatTime(att.waktu_absen)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="shift-badge shift-${att.shift_terdeteksi}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${getShiftLabel(att.shift_terdeteksi)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${att.shift_terdeteksi !== att.shift_jadwal ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs px-2 py-1 rounded" style="background-color: #fee2e2; color: #991b1b">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Jadwal: ${getShiftLabel(att.shift_jadwal)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `).join('');
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderRosterCalendar() {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('rosterCalendar');
Â  Â  Â  Â  Â  Â  if (!container) return;

Â  Â  Â  Â  Â  Â  const config = window.elementSdk?.config || defaultConfig;
Â  Â  Â  Â  Â  Â  const baseSize = config.font_size || defaultConfig.font_size;

Â  Â  Â  Â  Â  Â  // Get current week dates
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  const startOfWeek = new Date(today);
Â  Â  Â  Â  Â  Â  startOfWeek.setDate(today.getDate() - today.getDay());

Â  Â  Â  Â  Â  Â  const weekDates = [];
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 7; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const date = new Date(startOfWeek);
Â  Â  Â  Â  Â  Â  Â  Â  date.setDate(startOfWeek.getDate() + i);
Â  Â  Â  Â  Â  Â  Â  Â  weekDates.push(date);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const dayNames = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];

Â  Â  Â  Â  Â  Â  // Group roster by employee
Â  Â  Â  Â  Â  Â  const rosterByEmployee = {};
Â  Â  Â  Â  Â  Â  REFERENCE_EMPLOYEES.forEach(emp => {
Â  Â  Â  Â  Â  Â  Â  Â  rosterByEmployee[emp.nik] = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nama: emp.nama,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  posisi: emp.posisi,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shifts: {},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  records: {}
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  rosters.forEach(roster => {
Â  Â  Â  Â  Â  Â  Â  Â  if (rosterByEmployee[roster.nik]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rosterByEmployee[roster.nik].shifts[roster.tanggal] = roster.shift_roster;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rosterByEmployee[roster.nik].records[roster.tanggal] = roster;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  let html = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="roster-grid">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="roster-name" style="background-color: ${config.primary_color}; color: white; font-size: ${baseSize * 0.9}px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Karyawan
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  // Header days
Â  Â  Â  Â  Â  Â  weekDates.forEach((date, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  const isToday = date.toDateString() === today.toDateString();
Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="roster-cell" style="background-color: ${config.primary_color}; color: white; font-size: ${baseSize * 0.85}px; ${isToday ? 'border: 2px solid #fbbf24;' : ''}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>${dayNames[index]}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: ${baseSize * 0.75}px;">${date.getDate()}/${date.getMonth() + 1}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // Employee rows
Â  Â  Â  Â  Â  Â  Object.entries(rosterByEmployee).forEach(([nik, empData]) => {
Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="roster-name" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px; border: 1px solid #e2e8f0;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="font-semibold">${empData.nama}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: ${baseSize * 0.75}px; color: ${config.secondary_color};">${empData.posisi}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  weekDates.forEach(date => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dateStr = date.toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const shift = empData.shifts[dateStr] || '-';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const rosterRecord = empData.records[dateStr];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isToday = date.toDateString() === today.toDateString();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let cellClass = 'roster-cell cursor-pointer hover:opacity-80 transition-opacity';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let cellStyle = `font-size: ${baseSize * 0.8}px; border: 1px solid #e2e8f0;`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (shift === 'OFF') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += 'background-color: #f1f5f9; color: #64748b;';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (shift === 'CUTI') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += 'background-color: #fef3c7; color: #92400e;';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (shift === '1') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += 'background-color: #dbeafe; color: #1e40af;';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (shift === '2') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += 'background-color: #fef3c7; color: #92400e;';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (shift === '3') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += 'background-color: #e0e7ff; color: #3730a3;';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += `background-color: ${config.surface_color}; color: ${config.secondary_color};`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isToday) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellStyle += 'border: 2px solid #fbbf24;';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const displayText = shift === 'OFF' ? 'LIBUR' :Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shift === 'CUTI' ? 'CUTI' :Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shift === '-' ? '-' :Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  getShiftLabel(shift);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const clickHandler = rosterRecord ? `onclick="openEditRosterModal('${rosterRecord.__backendId}', '${nik}', '${empData.nama}', '${dateStr}', '${shift}')"` : '';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="${cellClass}" style="${cellStyle}" ${clickHandler} title="${rosterRecord ? 'Klik untuk edit' : 'Belum ada roster'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex flex-col items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>${displayText}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${rosterRecord ? '<div style="font-size: 10px; opacity: 0.7;">âœï¸</div>' : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  html += '</div>';

Â  Â  Â  Â  Â  Â  if (Object.keys(rosterByEmployee).length === 0 || rosters.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  html = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center py-12">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-6xl mb-4">ðŸ“…</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-lg mb-4" style="color: ${config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Belum ada roster kerja
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="generateRosterBtn" onclick="generateAndSaveRoster()" class="px-6 py-3 rounded-xl font-semibold text-white" style="background-color: ${config.primary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ðŸ“… Generate Roster Mingguan
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  container.innerHTML = html;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderWorkHoursReport() {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('workHoursReport');
Â  Â  Â  Â  Â  Â  if (!container) return;

Â  Â  Â  Â  Â  Â  const config = window.elementSdk?.config || defaultConfig;
Â  Â  Â  Â  Â  Â  const baseSize = config.font_size || defaultConfig.font_size;

Â  Â  Â  Â  Â  Â  const monthFilter = document.getElementById('monthFilter');
Â  Â  Â  Â  Â  Â  const yearFilter = document.getElementById('yearFilter');
Â  Â  Â  Â  Â  Â  const selectedMonth = monthFilter ? parseInt(monthFilter.value) : new Date().getMonth();
Â  Â  Â  Â  Â  Â  const selectedYear = yearFilter ? parseInt(yearFilter.value) : new Date().getFullYear();

Â  Â  Â  Â  Â  Â  const monthlyData = getAllEmployeesMonthlyHours(selectedMonth, selectedYear);
Â  Â  Â  Â  Â  Â  const monthNames = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];

Â  Â  Â  Â  Â  Â  if (monthlyData.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center py-12">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-6xl mb-4">â°</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-lg" style="color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Belum ada data jam kerja untuk ${monthNames[selectedMonth]} ${selectedYear}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const totalAllHours = monthlyData.reduce((sum, emp) => sum + emp.totalHours, 0);
Â  Â  Â  Â  Â  Â  const averageHours = totalAllHours / monthlyData.length;

Â  Â  Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="font-bold mb-4" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Ringkasan ${monthNames[selectedMonth]} ${selectedYear}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">â±ï¸</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-medium" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Total Jam Kerja</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize * 1.5}px; color: ${config.primary_color}">${totalAllHours.toFixed(1)} jam</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">ðŸ“Š</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-medium" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Rata-rata per Karyawan</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize * 1.5}px; color: ${config.primary_color}">${averageHours.toFixed(1)} jam</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">ðŸ‘¥</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-medium" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Karyawan Aktif</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize * 1.5}px; color: ${config.primary_color}">${monthlyData.filter(emp => emp.totalHours > 0).length}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="font-semibold" style="font-size: ${baseSize}px; color: ${config.text_color}">Detail per Karyawan</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${monthlyData.map(emp => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4 border-2" style="border-color: #e2e8f0; background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-3 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h5 class="font-semibold" style="font-size: ${baseSize}px; color: ${config.text_color}">${emp.nama}</h5>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-2 py-1 rounded text-xs font-medium" style="background-color: ${config.background_color}; color: ${config.secondary_color}">${emp.nik}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-2 py-1 rounded text-xs font-medium" style="background-color: ${config.primary_color}; color: white">${emp.posisi}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-3 gap-4 text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Total Jam:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold ml-1" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px">${emp.totalHours} jam</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Hari Kerja:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold ml-1" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px">${emp.totalDays} hari</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Rata-rata:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold ml-1" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px">${emp.averageHours} jam/hari</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-right">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="w-16 h-16 rounded-full flex items-center justify-center" style="background-color: ${emp.totalHours >= 160 ? '#dcfce7' : emp.totalHours >= 120 ? '#fef3c7' : '#fee2e2'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold" style="font-size: ${baseSize * 0.8}px; color: ${emp.totalHours >= 160 ? '#166534' : emp.totalHours >= 120 ? '#92400e' : '#991b1b'}">${emp.totalHours}h</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderDailyWorkHours() {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('dailyWorkHours');
Â  Â  Â  Â  Â  Â  if (!container) return;

Â  Â  Â  Â  Â  Â  const config = window.elementSdk?.config || defaultConfig;
Â  Â  Â  Â  Â  Â  const baseSize = config.font_size || defaultConfig.font_size;

Â  Â  Â  Â  Â  Â  const employeeFilter = document.getElementById('employeeFilter');
Â  Â  Â  Â  Â  Â  const monthYearFilter = document.getElementById('monthYearFilter');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const selectedNik = employeeFilter ? employeeFilter.value : '';
Â  Â  Â  Â  Â  Â  const selectedMonthYear = monthYearFilter ? monthYearFilter.value : '';

Â  Â  Â  Â  Â  Â  if (!selectedNik || !selectedMonthYear) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center py-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Pilih karyawan dan bulan untuk melihat detail jam kerja harian
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const [year, month] = selectedMonthYear.split('-');
Â  Â  Â  Â  Â  Â  const targetMonth = parseInt(month) - 1; // JavaScript months are 0-indexed
Â  Â  Â  Â  Â  Â  const targetYear = parseInt(year);

Â  Â  Â  Â  Â  Â  const employeeWorkHours = workHours.filter(wh => {
Â  Â  Â  Â  Â  Â  Â  Â  const workDate = new Date(wh.tanggal);
Â  Â  Â  Â  Â  Â  Â  Â  return wh.nik === selectedNik &&Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â workDate.getMonth() === targetMonth &&Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â workDate.getFullYear() === targetYear;
Â  Â  Â  Â  Â  Â  }).sort((a, b) => new Date(b.tanggal) - new Date(a.tanggal));

Â  Â  Â  Â  Â  Â  const employee = REFERENCE_EMPLOYEES.find(emp => emp.nik === selectedNik);
Â  Â  Â  Â  Â  Â  const monthNames = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];

Â  Â  Â  Â  Â  Â  if (employeeWorkHours.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center py-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-4xl mb-3">ðŸ“…</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Belum ada data jam kerja untuk ${employee?.nama || selectedNik} di ${monthNames[targetMonth]} ${targetYear}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const totalHours = employeeWorkHours.reduce((sum, wh) => sum + wh.total_jam, 0);
Â  Â  Â  Â  Â  Â  const averageHours = totalHours / employeeWorkHours.length;

Â  Â  Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="font-semibold mb-3" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${employee?.nama || selectedNik} - ${monthNames[targetMonth]} ${targetYear}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-2 gap-4 mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-3" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Total Jam Kerja:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="color: ${config.primary_color}; font-size: ${baseSize * 1.2}px">${totalHours.toFixed(1)} jam</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-3" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Rata-rata per Hari:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="color: ${config.primary_color}; font-size: ${baseSize * 1.2}px">${averageHours.toFixed(1)} jam</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${employeeWorkHours.map(wh => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const workDate = new Date(wh.tanggal);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const checkinTime = new Date(wh.jam_masuk);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const checkoutTime = new Date(wh.jam_keluar);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4 border" style="border-color: #e2e8f0; background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-3 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold" style="color: ${config.text_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${workDate.toLocaleDateString('id-ID', { weekday: 'long', day: 'numeric', month: 'long' })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="shift-badge shift-${wh.shift}" style="font-size: ${baseSize * 0.8}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${getShiftLabel(wh.shift)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-3 gap-4 text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Masuk:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px">${formatTime(wh.jam_masuk)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Keluar:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px">${formatTime(wh.jam_keluar)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Durasi:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px">${Math.floor(wh.total_jam)}j ${Math.round((wh.total_jam % 1) * 60)}m</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-right">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="px-3 py-2 rounded-lg" style="background-color: ${wh.total_jam >= 8 ? '#dcfce7' : wh.total_jam >= 6 ? '#fef3c7' : '#fee2e2'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold" style="font-size: ${baseSize}px; color: ${wh.total_jam >= 8 ? '#166534' : wh.total_jam >= 6 ? '#92400e' : '#991b1b'}">${wh.total_jam.toFixed(1)}h</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function exportToCSV() {
Â  Â  Â  Â  Â  Â  const headers = ['NIK', 'Nama', 'Posisi', 'Tanggal', 'Waktu', 'Shift Terdeteksi', 'Shift Jadwal', 'Status', 'Lokasi'];
Â  Â  Â  Â  Â  Â  const rows = attendances.map(att => [
Â  Â  Â  Â  Â  Â  Â  Â  att.nik,
Â  Â  Â  Â  Â  Â  Â  Â  att.nama,
Â  Â  Â  Â  Â  Â  Â  Â  att.posisi,
Â  Â  Â  Â  Â  Â  Â  Â  formatDate(att.waktu_absen),
Â  Â  Â  Â  Â  Â  Â  Â  formatTime(att.waktu_absen),
Â  Â  Â  Â  Â  Â  Â  Â  getShiftLabel(att.shift_terdeteksi),
Â  Â  Â  Â  Â  Â  Â  Â  getShiftLabel(att.shift_jadwal),
Â  Â  Â  Â  Â  Â  Â  Â  att.status_absen,
Â  Â  Â  Â  Â  Â  Â  Â  att.lokasi
Â  Â  Â  Â  Â  Â  ]);

Â  Â  Â  Â  Â  Â  let csv = headers.join(',') + '\n';
Â  Â  Â  Â  Â  Â  rows.forEach(row => {
Â  Â  Â  Â  Â  Â  Â  Â  csv += row.map(cell => `"${cell}"`).join(',') + '\n';
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  const blob = new Blob([csv], { type: 'text/csv' });
Â  Â  Â  Â  Â  Â  const url = window.URL.createObjectURL(blob);
Â  Â  Â  Â  Â  Â  const a = document.createElement('a');
Â  Â  Â  Â  Â  Â  a.href = url;
Â  Â  Â  Â  Â  Â  a.download = `absensi_${new Date().toISOString().split('T')[0]}.csv`;
Â  Â  Â  Â  Â  Â  a.click();
Â  Â  Â  Â  Â  Â  window.URL.revokeObjectURL(url);

Â  Â  Â  Â  Â  Â  showToast('Laporan berhasil diunduh', 'success');
Â  Â  Â  Â  }

Â  Â  Â  Â  function filterProfiles() {
Â  Â  Â  Â  Â  Â  const positionFilter = document.getElementById('profileFilter')?.value;
Â  Â  Â  Â  Â  Â  const searchFilter = document.getElementById('profileSearch')?.value?.toLowerCase();

Â  Â  Â  Â  Â  Â  let filtered = [...REFERENCE_EMPLOYEES];

Â  Â  Â  Â  Â  Â  if (positionFilter) {
Â  Â  Â  Â  Â  Â  Â  Â  filtered = filtered.filter(emp => emp.posisi === positionFilter);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (searchFilter) {
Â  Â  Â  Â  Â  Â  Â  Â  filtered = filtered.filter(emp =>Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  emp.nama.toLowerCase().includes(searchFilter) ||
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  emp.nik.toLowerCase().includes(searchFilter)
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  renderProfilesList(filtered);
Â  Â  Â  Â  }

Â  Â  Â  Â  function calculateAge(birthDate) {
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  const birth = new Date(birthDate);
Â  Â  Â  Â  Â  Â  let age = today.getFullYear() - birth.getFullYear();
Â  Â  Â  Â  Â  Â  const monthDiff = today.getMonth() - birth.getMonth();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
Â  Â  Â  Â  Â  Â  Â  Â  age--;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return age;
Â  Â  Â  Â  }

Â  Â  Â  Â  function calculateWorkYears(joinDate) {
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  const join = new Date(joinDate);
Â  Â  Â  Â  Â  Â  let years = today.getFullYear() - join.getFullYear();
Â  Â  Â  Â  Â  Â  const monthDiff = today.getMonth() - join.getMonth();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < join.getDate())) {
Â  Â  Â  Â  Â  Â  Â  Â  years--;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return years;
Â  Â  Â  Â  }

Â  Â  Â  Â  function getEmployeeStats(nik) {
Â  Â  Â  Â  Â  Â  const empAttendances = attendances.filter(att => att.nik === nik);
Â  Â  Â  Â  Â  Â  const totalAbsensi = empAttendances.length;
Â  Â  Â  Â  Â  Â  const hadirCount = empAttendances.filter(att => att.status_absen === 'hadir').length;
Â  Â  Â  Â  Â  Â  const terlambatCount = empAttendances.filter(att => att.status_absen === 'terlambat').length;
Â  Â  Â  Â  Â  Â  const tidakSesuaiCount = empAttendances.filter(att => att.status_absen === 'tidak-sesuai').length;

Â  Â  Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  Â  Â  Â  total: totalAbsensi,
Â  Â  Â  Â  Â  Â  Â  Â  hadir: hadirCount,
Â  Â  Â  Â  Â  Â  Â  Â  terlambat: terlambatCount,
Â  Â  Â  Â  Â  Â  Â  Â  tidakSesuai: tidakSesuaiCount,
Â  Â  Â  Â  Â  Â  Â  Â  tingkatKehadiran: totalAbsensi > 0 ? Math.round((hadirCount / totalAbsensi) * 100) : 0
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  }

Â  Â  Â  Â  function getMonthlyWorkHours(nik, month = null, year = null) {
Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  const targetMonth = month !== null ? month : now.getMonth();
Â  Â  Â  Â  Â  Â  const targetYear = year !== null ? year : now.getFullYear();

Â  Â  Â  Â  Â  Â  const monthlyHours = workHours.filter(wh => {
Â  Â  Â  Â  Â  Â  Â  Â  const workDate = new Date(wh.tanggal);
Â  Â  Â  Â  Â  Â  Â  Â  return wh.nik === nik &&Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â workDate.getMonth() === targetMonth &&Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â workDate.getFullYear() === targetYear;
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  const totalHours = monthlyHours.reduce((sum, wh) => sum + (wh.total_jam || 0), 0);
Â  Â  Â  Â  Â  Â  const totalDays = monthlyHours.length;
Â  Â  Â  Â  Â  Â  const averageHours = totalDays > 0 ? totalHours / totalDays : 0;

Â  Â  Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  Â  Â  Â  totalHours: Math.round(totalHours * 100) / 100,
Â  Â  Â  Â  Â  Â  Â  Â  totalDays,
Â  Â  Â  Â  Â  Â  Â  Â  averageHours: Math.round(averageHours * 100) / 100,
Â  Â  Â  Â  Â  Â  Â  Â  records: monthlyHours
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  }

Â  Â  Â  Â  function getAllEmployeesMonthlyHours(month = null, year = null) {
Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  const targetMonth = month !== null ? month : now.getMonth();
Â  Â  Â  Â  Â  Â  const targetYear = year !== null ? year : now.getFullYear();

Â  Â  Â  Â  Â  Â  const allEmployees = [...REFERENCE_EMPLOYEES, ...employees.filter(e => e.status === 'aktif')];
Â  Â  Â  Â  Â  Â  const uniqueEmployees = allEmployees.filter((emp, index, self) =>Â 
Â  Â  Â  Â  Â  Â  Â  Â  index === self.findIndex(e => e.nik === emp.nik)
Â  Â  Â  Â  Â  Â  );

Â  Â  Â  Â  Â  Â  return uniqueEmployees.map(emp => {
Â  Â  Â  Â  Â  Â  Â  Â  const monthlyData = getMonthlyWorkHours(emp.nik, targetMonth, targetYear);
Â  Â  Â  Â  Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nik: emp.nik,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nama: emp.nama,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  posisi: emp.posisi,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ...monthlyData
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  }).sort((a, b) => b.totalHours - a.totalHours);
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderProfilesList(filteredProfiles) {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('profilesList');
Â  Â  Â  Â  Â  Â  if (!container) return;

Â  Â  Â  Â  Â  Â  const config = window.elementSdk?.config || defaultConfig;
Â  Â  Â  Â  Â  Â  const baseSize = config.font_size || defaultConfig.font_size;

Â  Â  Â  Â  Â  Â  if (filteredProfiles.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="col-span-full text-center py-12">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-6xl mb-4">ðŸ‘¤</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-lg" style="color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Tidak ada profil karyawan yang ditemukan
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  container.innerHTML = filteredProfiles.map(emp => {
Â  Â  Â  Â  Â  Â  Â  Â  const stats = getEmployeeStats(emp.nik);
Â  Â  Â  Â  Â  Â  Â  Â  const age = calculateAge(emp.tanggal_lahir);
Â  Â  Â  Â  Â  Â  Â  Â  const workYears = calculateWorkYears(emp.tanggal_bergabung);

Â  Â  Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm card-hover fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-start gap-4 mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${emp.foto_profil}" alt="Foto ${emp.nama}" class="w-20 h-20 rounded-full object-cover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="font-bold mb-1" style="font-size: ${baseSize * 1.2}px; color: ${config.text_color}">${emp.nama}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium mb-1" style="font-size: ${baseSize * 0.9}px; color: ${config.primary_color}">${emp.posisi}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.85}px; color: ${config.secondary_color}">${emp.nik}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="shift-badge shift-${emp.shift_tetap} mt-2 inline-block" style="font-size: ${baseSize * 0.8}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${getShiftLabel(emp.shift_tetap)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-2 gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-3" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 mb-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-lg">ðŸŽ‚</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-medium" style="font-size: ${baseSize * 0.85}px; color: ${config.text_color}">Usia</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize}px; color: ${config.primary_color}">${age} tahun</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-3" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 mb-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-lg">ðŸ’¼</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-medium" style="font-size: ${baseSize * 0.85}px; color: ${config.text_color}">Masa Kerja</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize}px; color: ${config.primary_color}">${workYears} tahun</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-3" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-lg">ðŸ“Š</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-medium" style="font-size: ${baseSize * 0.85}px; color: ${config.text_color}">Statistik Absensi</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-2 gap-2 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize * 1.1}px; color: ${config.primary_color}">${stats.tingkatKehadiran}%</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.75}px; color: ${config.secondary_color}">Kehadiran</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color}">${stats.total}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.75}px; color: ${config.secondary_color}">Total Absen</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-sm">ðŸ“§</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">${emp.email}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-sm">ðŸ“±</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">${emp.telepon}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-sm">ðŸ </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">${emp.alamat}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-sm">ðŸŽ“</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">${emp.pendidikan}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-sm">${emp.status_pernikahan === 'Menikah' ? 'ðŸ’‘' : 'ðŸ‘¤'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">${emp.status_pernikahan}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-sm">ðŸš¨</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">${emp.kontak_darurat}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-sm">ðŸ“…</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">Bergabung: ${formatDate(emp.tanggal_bergabung)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-4 pt-4 border-t" style="border-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="openEditEmployeeModal(${JSON.stringify(emp).replace(/"/g, '&quot;')})" class="w-full px-4 py-2 rounded-lg font-medium text-white flex items-center justify-center gap-2" style="background-color: ${config.primary_color}; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>âœï¸</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Edit Profil</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }).join('');
Â  Â  Â  Â  }

Â  Â  Â  Â  async function render() {
Â  Â  Â  Â  Â  Â  const config = window.elementSdk?.config || defaultConfig;
Â  Â  Â  Â  Â  Â  const app = document.getElementById('app');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const customFont = config.font_family || defaultConfig.font_family;
Â  Â  Â  Â  Â  Â  const baseSize = config.font_size || defaultConfig.font_size;
Â  Â  Â  Â  Â  Â  const baseFontStack = 'system-ui, -apple-system, sans-serif';

Â  Â  Â  Â  Â  Â  document.body.style.backgroundColor = config.background_color || defaultConfig.background_color;
Â  Â  Â  Â  Â  Â  document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
Â  Â  Â  Â  Â  Â  document.body.style.fontSize = `${baseSize}px`;
Â  Â  Â  Â  Â  Â  document.body.style.color = config.text_color || defaultConfig.text_color;

Â  Â  Â  Â  Â  Â  if (currentView === 'login') {
Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="min-h-full flex items-center justify-center p-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="w-full max-w-md fade-in">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-6xl mb-4">ðŸ‘”</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="font-bold mb-2" style="font-size: ${baseSize * 2}px; color: ${config.text_color}">${config.app_title}</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">${config.company_tagline}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 shadow-xl" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-6 text-center" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Pilih Mode Akses</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="handleLogin('employee')" class="w-full btn-primary rounded-xl py-4 font-semibold text-white flex items-center justify-center gap-3" style="background-color: ${config.primary_color}; font-size: ${baseSize * 1.1}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">ðŸ‘¤</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Absensi Karyawan</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="handleLogin('admin')" class="w-full btn-primary rounded-xl py-4 font-semibold text-white flex items-center justify-center gap-3" style="background-color: ${config.secondary_color}; font-size: ${baseSize * 1.1}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">âš™ï¸</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Dashboard Admin</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  } else if (currentView === 'attendance') {
Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="min-h-full p-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="max-w-2xl mx-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="font-bold mb-1" style="font-size: ${baseSize * 1.8}px; color: ${config.text_color}">Portal Karyawan</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">Absensi, Cuti & Lembur</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="handleBackToLogin()" class="px-4 py-2 rounded-lg font-medium" style="background-color: ${config.surface_color}; color: ${config.secondary_color}; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â† Kembali
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Absensi Card -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 shadow-xl fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-6xl mb-4">ðŸŽ¯</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-2" style="font-size: ${baseSize * 1.5}px; color: ${config.text_color}">Absensi Harian</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">Masukkan NIK untuk absensi masuk/keluar</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize}px; color: ${config.text_color}">Nomor Induk Karyawan (NIK)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="nikInput" placeholder="Contoh: EMP001" class="w-full px-4 py-4 rounded-xl border-2 focus:outline-none focus:border-blue-500" style="font-size: ${baseSize * 1.1}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="handleNIKSubmit()" class="w-full btn-primary rounded-xl py-4 font-bold text-white" style="background-color: ${config.primary_color}; font-size: ${baseSize * 1.1}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Lanjutkan Absensi â†’
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Pengajuan Cuti/Ijin Card -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 shadow-xl fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-6xl mb-4">ðŸ“</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-2" style="font-size: ${baseSize * 1.5}px; color: ${config.text_color}">Pengajuan Cuti & Ijin</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">Ajukan permohonan cuti atau ijin kerja</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="openLeaveModalWithNIK()" class="w-full btn-primary rounded-xl py-4 font-bold text-white flex items-center justify-center gap-3" style="background-color: ${config.secondary_color}; font-size: ${baseSize * 1.1}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>ðŸ“‹</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Ajukan Cuti/Ijin</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Laporan Lembur Card -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 shadow-xl fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-6xl mb-4">â°</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-2" style="font-size: ${baseSize * 1.5}px; color: ${config.text_color}">Laporan Lembur</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">Laporkan jam kerja lembur Anda</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="openOvertimeModalWithNIK()" class="w-full btn-primary rounded-xl py-4 font-bold text-white flex items-center justify-center gap-3" style="background-color: #f59e0b; font-size: ${baseSize * 1.1}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>â±ï¸</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Lapor Lembur</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Leave Request Modal -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="leaveRequestModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-6 modal-backdrop">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-6" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Pengajuan Cuti/Ijin</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form id="leaveRequestForm" class="space-y-6" onsubmit="event.preventDefault(); handleLeaveRequest();">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">NIK *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="nik" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Contoh: EMP001">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Jenis Permohonan *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select name="leave_type" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Pilih Jenis</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="cuti">Cuti Tahunan</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="ijin">Ijin Khusus</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="sakit">Sakit</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Calendar Section -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-3" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Pilih Tanggal Cuti/Ijin *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4 border-2" style="border-color: #e2e8f0; background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" id="prevMonthLeave" class="px-3 py-2 rounded-lg font-semibold" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px">â€¹</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="currentMonthLeave" class="font-bold" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color}"></h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" id="nextMonthLeave" class="px-3 py-2 rounded-lg font-semibold" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px">â€º</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Min</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sen</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sel</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Rab</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Kam</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Jum</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sab</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="leaveCalendarGrid" class="calendar-grid"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="hidden" name="tanggal" id="selectedLeaveDate" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="selectedLeaveDateDisplay" class="mt-2 text-center font-medium" style="color: ${config.primary_color}; font-size: ${baseSize * 0.9}px"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Alasan *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea name="alasan" required rows="3" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Jelaskan alasan cuti/ijin"></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3 pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="closeModal('leaveRequestModal')" class="flex-1 px-4 py-3 rounded-lg font-semibold" style="background-color: #e2e8f0; color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Batal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="flex-1 px-4 py-3 rounded-lg font-semibold text-white" style="background-color: ${config.primary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Ajukan Cuti/Ijin
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Overtime Modal -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="overtimeModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-6 modal-backdrop">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-6" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Laporan Lembur</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form id="overtimeForm" class="space-y-6" onsubmit="event.preventDefault(); handleOvertimeReport();">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">NIK *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="nik" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Contoh: EMP001">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Shift Lembur *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select name="shift_lembur" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Pilih Shift</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="1">${config.shift1_label || 'Shift Pagi'} (08:00-16:00)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="2">${config.shift2_label || 'Shift Sore'} (16:00-24:00)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="3">${config.shift3_label || 'Shift Malam'} (00:00-08:00)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="weekend">Lembur Weekend</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="holiday">Lembur Hari Libur</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Calendar Section -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-3" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Pilih Tanggal Lembur *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4 border-2" style="border-color: #e2e8f0; background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" id="prevMonthOvertime" class="px-3 py-2 rounded-lg font-semibold" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px">â€¹</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="currentMonthOvertime" class="font-bold" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color}"></h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" id="nextMonthOvertime" class="px-3 py-2 rounded-lg font-semibold" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px">â€º</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Min</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sen</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sel</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Rab</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Kam</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Jum</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sab</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="overtimeCalendarGrid" class="calendar-grid"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="hidden" name="tanggal" id="selectedOvertimeDate" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="selectedOvertimeDateDisplay" class="mt-2 text-center font-medium" style="color: #f59e0b; font-size: ${baseSize * 0.9}px"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-2 gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Jam Mulai Lembur *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="time" name="jam_mulai" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Jam Selesai Lembur *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="time" name="jam_selesai" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="overtimeHoursCalculation" class="rounded-lg p-4" style="background-color: ${config.background_color}; display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">â±ï¸</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px">Kalkulasi Jam Lembur</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-3 gap-4 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="color: #f59e0b; font-size: ${baseSize * 1.2}px" id="totalOvertimeHours">0.0</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Total Jam</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="color: ${config.primary_color}; font-size: ${baseSize * 1.2}px" id="overtimeRate">1.5x</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Rate</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="color: #22c55e; font-size: ${baseSize * 1.2}px" id="overtimePoints">0</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Poin</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Pekerjaan yang Dilakukan *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea name="pekerjaan" required rows="3" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Jelaskan detail pekerjaan lembur yang dilakukan"></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3 pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="closeModal('overtimeModal')" class="flex-1 px-4 py-3 rounded-lg font-semibold" style="background-color: #e2e8f0; color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Batal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="flex-1 px-4 py-3 rounded-lg font-semibold text-white" style="background-color: #f59e0b; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Laporkan Lembur
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  } else if (currentView === 'employee_dashboard') {
Â  Â  Â  Â  Â  Â  Â  Â  const employee = window.currentEmployee;
Â  Â  Â  Â  Â  Â  Â  Â  if (!employee) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentView = 'attendance';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // Get today's roster
Â  Â  Â  Â  Â  Â  Â  Â  const today = new Date().toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â  Â  Â  const todayRoster = rosters.find(r => r.nik === employee.nik && r.tanggal === today);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Get today's attendance records
Â  Â  Â  Â  Â  Â  Â  Â  const todayAttendances = attendances.filter(att => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const attDate = new Date(att.waktu_absen).toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return attDate === today && att.nik === employee.nik;
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  // Check attendance status
Â  Â  Â  Â  Â  Â  Â  Â  const hasCheckedIn = todayAttendances.some(att => att.attendance_type === 'checkin');
Â  Â  Â  Â  Â  Â  Â  Â  const hasCheckedOut = todayAttendances.some(att => att.attendance_type === 'checkout');
Â  Â  Â  Â  Â  Â  Â  Â  const lastAttendance = todayAttendances[todayAttendances.length - 1];

Â  Â  Â  Â  Â  Â  Â  Â  // Get employee's leave requests
Â  Â  Â  Â  Â  Â  Â  Â  const employeeLeaves = leaveRequests.filter(req => req.nik === employee.nik)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .sort((a, b) => new Date(b.tanggal_pengajuan) - new Date(a.tanggal_pengajuan))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .slice(0, 5);

Â  Â  Â  Â  Â  Â  Â  Â  // Get employee's overtime reports
Â  Â  Â  Â  Â  Â  Â  Â  const employeeOvertimes = overtimeReports.filter(rep => rep.nik === employee.nik)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .sort((a, b) => new Date(b.tanggal_laporan) - new Date(a.tanggal_laporan))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .slice(0, 5);

Â  Â  Â  Â  Â  Â  Â  Â  // Get this week's roster
Â  Â  Â  Â  Â  Â  Â  Â  const startOfWeek = new Date();
Â  Â  Â  Â  Â  Â  Â  Â  startOfWeek.setDate(startOfWeek.getDate() - startOfWeek.getDay());
Â  Â  Â  Â  Â  Â  Â  Â  const weekRoster = [];
Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < 7; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const date = new Date(startOfWeek);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  date.setDate(startOfWeek.getDate() + i);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dateStr = date.toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const roster = rosters.find(r => r.nik === employee.nik && r.tanggal === dateStr);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  weekRoster.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  date: dateStr,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  day: date.toLocaleDateString('id-ID', { weekday: 'short' }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dayNum: date.getDate(),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shift: roster ? roster.shift_roster : '-',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isToday: dateStr === today
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // Get work hours summary for current month
Â  Â  Â  Â  Â  Â  Â  Â  const currentMonth = new Date().getMonth();
Â  Â  Â  Â  Â  Â  Â  Â  const currentYear = new Date().getFullYear();
Â  Â  Â  Â  Â  Â  Â  Â  const monthlyHours = getMonthlyWorkHours(employee.nik, currentMonth, currentYear);

Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="min-h-full p-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="max-w-6xl mx-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Header -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${employee.foto_profil}" alt="Foto ${employee.nama}" class="w-16 h-16 rounded-full object-cover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="font-bold mb-1" style="font-size: ${baseSize * 1.8}px; color: ${config.text_color}">Selamat Datang, ${employee.nama}!</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">${employee.nik} â€¢ ${employee.posisi}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="handleBackToAttendance()" class="px-4 py-2 rounded-lg font-medium" style="background-color: ${config.surface_color}; color: ${config.secondary_color}; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â† Kembali
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Left Column: Attendance & Roster -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="lg:col-span-2 space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Today's Status -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-6 shadow-xl" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-4 flex items-center gap-2" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>ðŸ“…</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Status Hari Ini</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${todayRoster && (todayRoster.shift_roster === 'OFF' || todayRoster.shift_roster === 'CUTI' || todayRoster.shift_roster === 'IJIN') ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center py-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-6xl mb-4">${todayRoster.shift_roster === 'OFF' ? 'ðŸ–ï¸' : 'ðŸ“‹'}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="font-bold mb-2" style="font-size: ${baseSize * 1.2}px; color: ${config.text_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${todayRoster.shift_roster === 'OFF' ? 'Hari Libur' : todayRoster.shift_roster === 'CUTI' ? 'Sedang Cuti' : 'Sedang Ijin'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize}px; color: ${config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${todayRoster.keterangan}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">â°</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-medium" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Jadwal Shift</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize * 1.2}px; color: ${config.primary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${todayRoster ? getShiftLabel(todayRoster.shift_roster) : getShiftLabel(employee.shift_tetap)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${todayRoster ? getShiftTime(todayRoster.shift_roster) : getShiftTime(employee.shift_tetap)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">${hasCheckedIn ? (hasCheckedOut ? 'âœ…' : 'ðŸŸ¡') : 'â­•'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-medium" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Status Absensi</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize * 1.2}px; color: ${hasCheckedIn ? (hasCheckedOut ? '#22c55e' : '#f59e0b') : config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${hasCheckedIn ? (hasCheckedOut ? 'Selesai Kerja' : 'Sedang Kerja') : 'Belum Absen'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${lastAttendance ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${lastAttendance.attendance_type === 'checkin' ? 'Masuk' : 'Keluar'}: ${formatTime(lastAttendance.waktu_absen)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Attendance Button -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${!hasCheckedIn ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="startAttendanceProcess('checkin')" class="px-8 py-4 rounded-xl font-bold text-white text-lg" style="background-color: ${config.primary_color}; font-size: ${baseSize * 1.1}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ðŸ“¸ Absen Masuk
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : !hasCheckedOut ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="startAttendanceProcess('checkout')" class="px-8 py-4 rounded-xl font-bold text-white text-lg" style="background-color: #f59e0b; font-size: ${baseSize * 1.1}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ðŸ“¸ Absen Pulang
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4" style="background-color: #dcfce7">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-semibold" style="color: #166534; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  âœ… Absensi hari ini sudah lengkap
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Weekly Roster -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-6 shadow-xl" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-4 flex items-center gap-2" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>ðŸ“‹</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Roster Minggu Ini</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-7 gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${weekRoster.map(day => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center p-3 rounded-lg ${day.isToday ? 'ring-2' : ''}" style="background-color: ${day.isToday ? config.background_color : '#f8fafc'}; ${day.isToday ? `border-color: ${config.primary_color}` : ''}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="font-semibold mb-1" style="font-size: ${baseSize * 0.8}px; color: ${config.text_color}">${day.day}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="font-bold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${day.isToday ? config.primary_color : config.text_color}">${day.dayNum}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="shift-badge shift-${day.shift === 'OFF' ? 'off' : day.shift}" style="font-size: ${baseSize * 0.7}px; padding: 2px 6px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${day.shift === 'OFF' ? 'LIBUR' : day.shift === 'CUTI' ? 'CUTI' : day.shift === 'IJIN' ? 'IJIN' : day.shift === '-' ? '-' : getShiftLabel(day.shift)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Work Hours Summary -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-6 shadow-xl" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-4 flex items-center gap-2" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>â±ï¸</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Jam Kerja Bulan Ini</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-3 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center p-4 rounded-lg" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="font-bold mb-1" style="font-size: ${baseSize * 1.5}px; color: ${config.primary_color}">${monthlyHours.totalHours}h</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">Total Jam</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center p-4 rounded-lg" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="font-bold mb-1" style="font-size: ${baseSize * 1.5}px; color: ${config.primary_color}">${monthlyHours.totalDays}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">Hari Kerja</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center p-4 rounded-lg" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="font-bold mb-1" style="font-size: ${baseSize * 1.5}px; color: ${config.primary_color}">${monthlyHours.averageHours}h</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">Rata-rata</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Right Column: Leave & Overtime -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Quick Actions -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-6 shadow-xl" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-4" style="font-size: ${baseSize * 1.2}px; color: ${config.text_color}">Aksi Cepat</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="openEmployeeLeaveModal('${employee.nik}')" class="w-full px-4 py-3 rounded-lg font-medium text-white flex items-center justify-center gap-2" style="background-color: ${config.secondary_color}; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>ðŸ“</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Ajukan Cuti/Ijin</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="openEmployeeOvertimeModal('${employee.nik}')" class="w-full px-4 py-3 rounded-lg font-medium text-white flex items-center justify-center gap-2" style="background-color: #f59e0b; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>â°</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Lapor Lembur</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Recent Leave Requests -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-6 shadow-xl" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-4" style="font-size: ${baseSize * 1.2}px; color: ${config.text_color}">Pengajuan Cuti/Ijin</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-3 max-h-64 overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${employeeLeaves.length === 0 ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center py-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-3xl mb-2">ðŸ“</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Belum ada pengajuan</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : employeeLeaves.map(leave => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-3 border" style="border-color: #e2e8f0; background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-medium capitalize" style="font-size: ${baseSize * 0.85}px; color: ${config.text_color}">${leave.leave_type}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-2 py-1 rounded text-xs font-semibold" style="background-color: ${leave.status === 'approved' ? '#dcfce7' : leave.status === 'rejected' ? '#fee2e2' : '#fef3c7'}; color: ${leave.status === 'approved' ? '#166534' : leave.status === 'rejected' ? '#991b1b' : '#92400e'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${leave.status === 'approved' ? 'âœ“ Disetujui' : leave.status === 'rejected' ? 'âœ— Ditolak' : 'â³ Menunggu'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${formatDate(leave.tanggal)} â€¢ ${leave.alasan.substring(0, 50)}${leave.alasan.length > 50 ? '...' : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Recent Overtime Reports -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-6 shadow-xl" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-4" style="font-size: ${baseSize * 1.2}px; color: ${config.text_color}">Laporan Lembur</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-3 max-h-64 overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${employeeOvertimes.length === 0 ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center py-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-3xl mb-2">â°</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Belum ada laporan</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : employeeOvertimes.map(overtime => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-3 border" style="border-color: #e2e8f0; background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-medium" style="font-size: ${baseSize * 0.85}px; color: ${config.text_color}">${overtime.total_jam_lembur.toFixed(1)} jam</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-2 py-1 rounded text-xs font-semibold" style="background-color: ${overtime.status === 'approved' ? '#dcfce7' : overtime.status === 'rejected' ? '#fee2e2' : '#fef3c7'}; color: ${overtime.status === 'approved' ? '#166534' : overtime.status === 'rejected' ? '#991b1b' : '#92400e'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${overtime.status === 'approved' ? 'âœ“ Disetujui' : overtime.status === 'rejected' ? 'âœ— Ditolak' : 'â³ Menunggu'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: ${baseSize * 0.8}px; color: ${config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${formatDate(overtime.tanggal)} â€¢ ${overtime.jam_mulai}-${overtime.jam_selesai}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  } else if (currentView === 'camera') {
Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="min-h-full p-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="max-w-2xl mx-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="font-bold mb-1" style="font-size: ${baseSize * 1.8}px; color: ${config.text_color}">Ambil Foto Wajah</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">Posisikan wajah di dalam lingkaran</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="handleBackToAttendance()" class="px-4 py-2 rounded-lg font-medium" style="background-color: ${config.surface_color}; color: ${config.secondary_color}; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â† Kembali
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 shadow-xl fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="camera-container mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <video id="video" autoplay playsinline></video>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <canvas id="canvas"></canvas>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="overlay-circle"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4" style="background-color: #fef3c7">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-center font-medium" style="font-size: ${baseSize * 0.9}px; color: #92400e">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  âš ï¸ Pastikan wajah terlihat jelas dan pencahayaan cukup
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="captureBtn" onclick="handleTakePhoto()" class="w-full btn-primary rounded-xl py-4 font-bold text-white flex items-center justify-center gap-3" style="background-color: ${config.primary_color}; font-size: ${baseSize * 1.1}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">ðŸ“¸</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Ambil Foto</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  } else if (currentView === 'success') {
Â  Â  Â  Â  Â  Â  Â  Â  const lastAttendance = attendances[attendances.length - 1];
Â  Â  Â  Â  Â  Â  Â  Â  const attendanceType = window.lastAttendanceType || 'checkin';
Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="min-h-full flex items-center justify-center p-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="w-full max-w-md fade-in">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 shadow-xl text-center" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-6xl mb-4">âœ…</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-2" style="font-size: ${baseSize * 1.8}px; color: ${config.text_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${attendanceType === 'checkout' ? 'Absen Pulang Berhasil!' : 'Absen Masuk Berhasil!'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="mb-6" style="font-size: ${baseSize}px; color: ${config.secondary_color}">Terima kasih, ${lastAttendance?.nama}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 mb-6" style="background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${lastAttendance?.foto_data}" alt="Foto" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.9}px">Jenis:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${attendanceType === 'checkout' ? 'Absen Pulang' : 'Absen Masuk'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.9}px">Waktu:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px">${formatTime(lastAttendance?.waktu_absen)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.9}px">Shift:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px">${getShiftLabel(lastAttendance?.shift_terdeteksi)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.9}px">Status:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="status-badge status-${lastAttendance?.status_absen}" style="font-size: ${baseSize * 0.85}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${lastAttendance?.status_absen === 'hadir' ? 'âœ“ Hadir' : lastAttendance?.status_absen === 'terlambat' ? 'â° Terlambat' : 'âš  Tidak Sesuai'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="handleBackToEmployeeDashboard()" class="w-full btn-primary rounded-xl py-4 font-bold text-white" style="background-color: ${config.primary_color}; font-size: ${baseSize * 1.1}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Kembali ke Dashboard
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="handleBackToAttendance()" class="w-full btn-primary rounded-xl py-3 font-medium" style="background-color: ${config.surface_color}; color: ${config.secondary_color}; border: 2px solid #e2e8f0; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Portal Utama
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  } else if (currentView === 'dashboard') {
Â  Â  Â  Â  Â  Â  Â  Â  const today = new Date().toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â  Â  Â  const todayAttendances = attendances.filter(att => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const attDate = new Date(att.waktu_absen).toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return attDate === today;
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  const hadirCount = todayAttendances.filter(att => att.status_absen === 'hadir').length;
Â  Â  Â  Â  Â  Â  Â  Â  const terlambatCount = todayAttendances.filter(att => att.status_absen === 'terlambat').length;
Â  Â  Â  Â  Â  Â  Â  Â  const tidakSesuaiCount = todayAttendances.filter(att => att.status_absen === 'tidak-sesuai').length;

Â  Â  Â  Â  Â  Â  Â  Â  app.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="min-h-full p-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="max-w-7xl mx-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="font-bold mb-1" style="font-size: ${baseSize * 2}px; color: ${config.text_color}">Dashboard Admin</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize}px; color: ${config.secondary_color}">Kelola absensi dan karyawan</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="handleLogout()" class="px-6 py-3 rounded-xl font-semibold text-white" style="background-color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Keluar
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="nav-tabs">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="nav-tab ${currentTab === 'dashboard' ? 'active' : ''}" onclick="switchTab('dashboard')" style="font-size: ${baseSize}px; color: ${currentTab === 'dashboard' ? config.primary_color : config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ðŸ“Š Dashboard
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="nav-tab ${currentTab === 'workhours' ? 'active' : ''}" onclick="switchTab('workhours')" style="font-size: ${baseSize}px; color: ${currentTab === 'workhours' ? config.primary_color : config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â° Jam Kerja
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="nav-tab ${currentTab === 'roster' ? 'active' : ''}" onclick="switchTab('roster')" style="font-size: ${baseSize}px; color: ${currentTab === 'roster' ? config.primary_color : config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ðŸ“… Roster Kerja
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="nav-tab ${currentTab === 'employees' ? 'active' : ''}" onclick="switchTab('employees')" style="font-size: ${baseSize}px; color: ${currentTab === 'employees' ? config.primary_color : config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ðŸ‘¥ Karyawan
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="nav-tab ${currentTab === 'profiles' ? 'active' : ''}" onclick="switchTab('profiles')" style="font-size: ${baseSize}px; color: ${currentTab === 'profiles' ? config.primary_color : config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ðŸ“‹ Profil Karyawan
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="nav-tab ${currentTab === 'leaves' ? 'active' : ''}" onclick="switchTab('leaves')" style="font-size: ${baseSize}px; color: ${currentTab === 'leaves' ? config.primary_color : config.secondary_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ðŸ“ Cuti & Lembur
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${currentTab === 'dashboard' ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm card-hover" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">Hadir Hari Ini</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">âœ…</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize * 2}px; color: ${config.primary_color}">${hadirCount}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm card-hover" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">Terlambat</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">â°</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize * 2}px; color: #f59e0b">${terlambatCount}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm card-hover" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">Tidak Sesuai</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">âš ï¸</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize * 2}px; color: #ef4444">${tidakSesuaiCount}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm card-hover" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: ${baseSize * 0.9}px; color: ${config.secondary_color}">Total Karyawan</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">ðŸ‘¥</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="font-size: ${baseSize * 2}px; color: ${config.text_color}">${employees.filter(e => e.status === 'aktif').length}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Riwayat Absensi</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="exportToCSV()" class="px-4 py-2 rounded-lg font-medium flex items-center gap-2" style="background-color: ${config.primary_color}; color: white; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>ðŸ“¥</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Ekspor CSV</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="date" id="dateFilter" onchange="filterAttendance()" class="px-4 py-2 rounded-lg border-2" style="font-size: ${baseSize * 0.9}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="shiftFilter" onchange="filterAttendance()" class="px-4 py-2 rounded-lg border-2" style="font-size: ${baseSize * 0.9}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Semua Shift</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="1">${config.shift1_label}</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="2">${config.shift2_label}</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="3">${config.shift3_label}</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="nikFilter" placeholder="Cari NIK/Nama" onkeyup="filterAttendance()" class="px-4 py-2 rounded-lg border-2" style="font-size: ${baseSize * 0.9}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="attendanceList" class="space-y-4 max-h-96 overflow-y-auto"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : currentTab === 'workhours' ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Laporan Jam Kerja Bulanan</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="monthFilter" onchange="renderWorkHoursReport()" class="px-4 py-2 rounded-lg border-2" style="font-size: ${baseSize * 0.9}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="0">Januari</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="1">Februari</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="2">Maret</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="3">April</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="4">Mei</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="5">Juni</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="6">Juli</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="7">Agustus</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="8">September</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="9">Oktober</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="10">November</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="11">Desember</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="yearFilter" onchange="renderWorkHoursReport()" class="px-4 py-2 rounded-lg border-2" style="font-size: ${baseSize * 0.9}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="2024">2024</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="2023">2023</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="workHoursReport"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="font-bold mb-4" style="font-size: ${baseSize * 1.2}px; color: ${config.text_color}">Detail Jam Kerja Harian</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="employeeFilter" onchange="renderDailyWorkHours()" class="px-4 py-2 rounded-lg border-2" style="font-size: ${baseSize * 0.9}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Pilih Karyawan</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${REFERENCE_EMPLOYEES.map(emp => `<option value="${emp.nik}">${emp.nama} (${emp.nik})</option>`).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="month" id="monthYearFilter" onchange="renderDailyWorkHours()" class="px-4 py-2 rounded-lg border-2" style="font-size: ${baseSize * 0.9}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="dailyWorkHours" class="max-h-96 overflow-y-auto"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : currentTab === 'roster' ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Roster Kerja Mingguan</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${rosters.length > 0 ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="delete-btn-clearRoster" onclick="showDeleteConfirm('clearRoster')" class="px-4 py-2 rounded-lg font-medium" style="background-color: #fee2e2; color: #991b1b; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ðŸ—‘ï¸ Hapus Roster
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="confirm-delete-div-clearRoster" style="display: none;" class="flex gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="clearRosterConfirm" onclick="clearRoster()" class="px-3 py-2 rounded-lg font-medium" style="background-color: #ef4444; color: white; font-size: ${baseSize * 0.85}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Ya, Hapus Semua
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="hideDeleteConfirm('clearRoster')" class="px-3 py-2 rounded-lg font-medium" style="background-color: #e2e8f0; color: #64748b; font-size: ${baseSize * 0.85}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Batal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="generateRosterBtn" onclick="generateAndSaveRoster()" class="px-4 py-2 rounded-lg font-medium text-white" style="background-color: ${config.primary_color}; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ðŸ“… Generate Roster
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="rosterCalendar"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : currentTab === 'profiles' ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Profil Karyawan Lengkap</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="profileFilter" onchange="filterProfiles()" class="px-4 py-2 rounded-lg border-2" style="font-size: ${baseSize * 0.9}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Semua Posisi</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Koordinator">Koordinator</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Supervisor">Supervisor</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Kasir">Kasir</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Barista">Barista</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Waitress">Waitress</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Koki">Koki</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="profileSearch" placeholder="Cari nama/NIK" onkeyup="filterProfiles()" class="px-4 py-2 rounded-lg border-2" style="font-size: ${baseSize * 0.9}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="profilesList" class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : currentTab === 'leaves' ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Pengajuan Cuti/Ijin -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Pengajuan Cuti & Ijin</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="leaveStatusFilter" onchange="renderLeaveRequests()" class="px-4 py-2 rounded-lg border-2" style="font-size: ${baseSize * 0.9}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Semua Status</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="pending">Menunggu</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="approved">Disetujui</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="rejected">Ditolak</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="leaveRequestsList" class="space-y-4 max-h-96 overflow-y-auto"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Laporan Lembur -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Laporan Lembur</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="overtimeStatusFilter" onchange="renderOvertimeReports()" class="px-4 py-2 rounded-lg border-2" style="font-size: ${baseSize * 0.9}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Semua Status</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="pending">Menunggu</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="approved">Disetujui</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="rejected">Ditolak</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="overtimeReportsList" class="space-y-4 max-h-96 overflow-y-auto"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-xl p-6 shadow-sm" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Kelola Karyawan</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="openModal('addEmployeeModal')" class="px-4 py-2 rounded-lg font-medium text-white" style="background-color: ${config.primary_color}; font-size: ${baseSize * 0.9}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  + Tambah Karyawan
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${employees.map(emp => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4 border-2 card-hover" style="border-color: #e2e8f0; background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-start justify-between mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-semibold" style="font-size: ${baseSize}px; color: ${config.text_color}">${emp.nama}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.85}px; color: ${config.secondary_color}">${emp.nik}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-2 py-1 rounded text-xs font-semibold" style="background-color: ${emp.status === 'aktif' ? '#dcfce7' : '#fee2e2'}; color: ${emp.status === 'aktif' ? '#166534' : '#991b1b'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${emp.status === 'aktif' ? 'âœ“ Aktif' : 'âœ— Non-aktif'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: ${baseSize * 0.85}px; color: ${config.secondary_color}">${emp.posisi}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="shift-badge shift-${emp.shift_tetap}" style="font-size: ${baseSize * 0.75}px">${getShiftLabel(emp.shift_tetap)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="openEditEmployeeModal(allRecords.find(r => r.__backendId === '${emp.__backendId}'))" class="px-3 py-1 rounded text-xs font-medium" style="background-color: #dbeafe; color: #1e40af; font-size: ${baseSize * 0.8}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Edit
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="delete-btn-${emp.__backendId}" onclick="showDeleteConfirm('${emp.__backendId}')" class="px-3 py-1 rounded text-xs font-medium" style="background-color: #fee2e2; color: #991b1b; font-size: ${baseSize * 0.8}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Hapus
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="confirm-delete-div-${emp.__backendId}" style="display: none;" class="flex gap-2 mt-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="confirm-delete-${emp.__backendId}" onclick="handleDeleteEmployee(allRecords.find(r => r.__backendId === '${emp.__backendId}'))" class="px-2 py-1 rounded text-xs font-medium" style="background-color: #ef4444; color: white; font-size: ${baseSize * 0.75}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Ya, Hapus
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="hideDeleteConfirm('${emp.__backendId}')" class="px-2 py-1 rounded text-xs font-medium" style="background-color: #e2e8f0; color: #64748b; font-size: ${baseSize * 0.75}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Batal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="addEmployeeModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-6 modal-backdrop">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-6" style="font-size: ${baseSize * 1.5}px; color: ${config.text_color}">Tambah Profil Karyawan Baru</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form id="employeeForm" class="space-y-4" onsubmit="event.preventDefault(); handleAddEmployee();">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">NIK *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="nik" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Contoh: EMP013">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Nama Lengkap *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="nama" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Nama lengkap karyawan">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Posisi *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select name="posisi" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Pilih Posisi</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Koordinator">Koordinator</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Supervisor">Supervisor</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Kasir">Kasir</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Barista">Barista</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Waitress">Waitress</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Koki">Koki</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Shift Tetap *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select name="shift_tetap" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="1">${config.shift1_label}</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="2">${config.shift2_label}</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="3">${config.shift3_label}</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Email</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" name="email" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="email@company.com">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Telepon</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="tel" name="telepon" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="081234567890">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Alamat</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea name="alamat" rows="2" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Alamat lengkap"></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Tanggal Lahir</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="date" name="tanggal_lahir" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Tanggal Bergabung</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="date" name="tanggal_bergabung" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Pendidikan</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="pendidikan" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Contoh: S1 Teknik Industri">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Status Pernikahan</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select name="status_pernikahan" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Belum Menikah">Belum Menikah</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Menikah">Menikah</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Kontak Darurat</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="kontak_darurat" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Nama (Hubungan) - Nomor Telepon">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">URL Foto Profil</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="url" name="foto_profil" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="https://... (opsional, akan dibuat otomatis jika kosong)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3 pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="closeModal('addEmployeeModal')" class="flex-1 px-4 py-3 rounded-lg font-semibold" style="background-color: #e2e8f0; color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Batal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="flex-1 px-4 py-3 rounded-lg font-semibold text-white" style="background-color: ${config.primary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Simpan Profil
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="editEmployeeModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-6 modal-backdrop">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-6" style="font-size: ${baseSize * 1.5}px; color: ${config.text_color}">Edit Profil Karyawan</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form id="editEmployeeForm" class="space-y-4" onsubmit="event.preventDefault(); handleEditEmployee();">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="hidden" name="employee_id">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">NIK *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="nik" required readonly class="w-full px-4 py-3 rounded-lg border-2 bg-gray-100" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Nama Lengkap *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="nama" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Posisi *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select name="posisi" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Koordinator">Koordinator</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Supervisor">Supervisor</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Kasir">Kasir</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Barista">Barista</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Waitress">Waitress</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Koki">Koki</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Shift Tetap *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select name="shift_tetap" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="1">${config.shift1_label}</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="2">${config.shift2_label}</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="3">${config.shift3_label}</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Email</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" name="email" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Telepon</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="tel" name="telepon" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Alamat</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea name="alamat" rows="2" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0"></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Tanggal Lahir</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="date" name="tanggal_lahir" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Tanggal Bergabung</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="date" name="tanggal_bergabung" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Pendidikan</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="pendidikan" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Status Pernikahan</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select name="status_pernikahan" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Belum Menikah">Belum Menikah</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Menikah">Menikah</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Kontak Darurat</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="kontak_darurat" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">URL Foto Profil</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="url" name="foto_profil" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3 pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="closeModal('editEmployeeModal')" class="flex-1 px-4 py-3 rounded-lg font-semibold" style="background-color: #e2e8f0; color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Batal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="flex-1 px-4 py-3 rounded-lg font-semibold text-white" style="background-color: ${config.primary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Simpan Perubahan
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="editRosterModal" class="hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Leave Request Modal -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="leaveRequestModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-6 modal-backdrop">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-6" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Pengajuan Cuti/Ijin</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form id="leaveRequestForm" class="space-y-6" onsubmit="event.preventDefault(); handleLeaveRequest();">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">NIK *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="nik" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Contoh: EMP001">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Jenis Permohonan *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select name="leave_type" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Pilih Jenis</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="cuti">Cuti Tahunan</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="ijin">Ijin Khusus</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="sakit">Sakit</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Calendar Section -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-3" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Pilih Tanggal Cuti/Ijin *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4 border-2" style="border-color: #e2e8f0; background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" id="prevMonthLeave" class="px-3 py-2 rounded-lg font-semibold" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px">â€¹</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="currentMonthLeave" class="font-bold" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color}"></h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" id="nextMonthLeave" class="px-3 py-2 rounded-lg font-semibold" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px">â€º</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Min</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sen</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sel</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Rab</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Kam</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Jum</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sab</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="leaveCalendarGrid" class="calendar-grid"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="hidden" name="tanggal" id="selectedLeaveDate" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="selectedLeaveDateDisplay" class="mt-2 text-center font-medium" style="color: ${config.primary_color}; font-size: ${baseSize * 0.9}px"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Alasan *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea name="alasan" required rows="3" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Jelaskan alasan cuti/ijin"></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3 pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="closeModal('leaveRequestModal')" class="flex-1 px-4 py-3 rounded-lg font-semibold" style="background-color: #e2e8f0; color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Batal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="flex-1 px-4 py-3 rounded-lg font-semibold text-white" style="background-color: ${config.primary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Ajukan Cuti/Ijin
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Overtime Modal -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="overtimeModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-6 modal-backdrop">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl fade-in" style="background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="font-bold mb-6" style="font-size: ${baseSize * 1.3}px; color: ${config.text_color}">Laporan Lembur</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form id="overtimeForm" class="space-y-6" onsubmit="event.preventDefault(); handleOvertimeReport();">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">NIK *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="nik" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Contoh: EMP001">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Shift Lembur *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select name="shift_lembur" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Pilih Shift</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="1">${config.shift1_label || 'Shift Pagi'} (08:00-16:00)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="2">${config.shift2_label || 'Shift Sore'} (16:00-24:00)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="3">${config.shift3_label || 'Shift Malam'} (00:00-08:00)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="weekend">Lembur Weekend</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="holiday">Lembur Hari Libur</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Calendar Section -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-3" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Pilih Tanggal Lembur *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4 border-2" style="border-color: #e2e8f0; background-color: ${config.background_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" id="prevMonthOvertime" class="px-3 py-2 rounded-lg font-semibold" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px">â€¹</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="currentMonthOvertime" class="font-bold" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color}"></h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" id="nextMonthOvertime" class="px-3 py-2 rounded-lg font-semibold" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px">â€º</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Min</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sen</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sel</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Rab</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Kam</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Jum</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calendar-header-day" style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Sab</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="overtimeCalendarGrid" class="calendar-grid"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="hidden" name="tanggal" id="selectedOvertimeDate" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="selectedOvertimeDateDisplay" class="mt-2 text-center font-medium" style="color: #f59e0b; font-size: ${baseSize * 0.9}px"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-2 gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Jam Mulai Lembur *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="time" name="jam_mulai" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Jam Selesai Lembur *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="time" name="jam_selesai" required class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="overtimeHoursCalculation" class="rounded-lg p-4" style="background-color: ${config.background_color}; display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-2xl">â±ï¸</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px">Kalkulasi Jam Lembur</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-3 gap-4 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="color: #f59e0b; font-size: ${baseSize * 1.2}px" id="totalOvertimeHours">0.0</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Total Jam</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="color: ${config.primary_color}; font-size: ${baseSize * 1.2}px" id="overtimeRate">1.5x</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Rate</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold" style="color: #22c55e; font-size: ${baseSize * 1.2}px" id="overtimePoints">0</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize * 0.8}px">Poin</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block font-semibold mb-2" style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}">Pekerjaan yang Dilakukan *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea name="pekerjaan" required rows="3" class="w-full px-4 py-3 rounded-lg border-2" style="font-size: ${baseSize}px; border-color: #e2e8f0" placeholder="Jelaskan detail pekerjaan lembur yang dilakukan"></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-3 pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="closeModal('overtimeModal')" class="flex-1 px-4 py-3 rounded-lg font-semibold" style="background-color: #e2e8f0; color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Batal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="flex-1 px-4 py-3 rounded-lg font-semibold text-white" style="background-color: #f59e0b; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Laporkan Lembur
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  if (currentTab === 'dashboard') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderAttendanceList(attendances);
Â  Â  Â  Â  Â  Â  Â  Â  } else if (currentTab === 'workhours') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderWorkHoursReport();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderDailyWorkHours();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Set current month/year as default
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const now = new Date();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const monthFilter = document.getElementById('monthFilter');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const yearFilter = document.getElementById('yearFilter');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const monthYearFilter = document.getElementById('monthYearFilter');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (monthFilter) monthFilter.value = now.getMonth().toString();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (yearFilter) yearFilter.value = now.getFullYear().toString();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (monthYearFilter) monthYearFilter.value = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}`;
Â  Â  Â  Â  Â  Â  Â  Â  } else if (currentTab === 'roster') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderRosterCalendar();
Â  Â  Â  Â  Â  Â  Â  Â  } else if (currentTab === 'profiles') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderProfilesList(REFERENCE_EMPLOYEES);
Â  Â  Â  Â  Â  Â  Â  Â  } else if (currentTab === 'leaves') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderLeaveRequests();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderOvertimeReports();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  let leaveRequests = [];
Â  Â  Â  Â  let overtimeReports = [];

Â  Â  Â  Â  function renderLeaveRequests() {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('leaveRequestsList');
Â  Â  Â  Â  Â  Â  if (!container) return;

Â  Â  Â  Â  Â  Â  const config = window.elementSdk?.config || defaultConfig;
Â  Â  Â  Â  Â  Â  const baseSize = config.font_size || defaultConfig.font_size;

Â  Â  Â  Â  Â  Â  const statusFilter = document.getElementById('leaveStatusFilter')?.value;
Â  Â  Â  Â  Â  Â  let filtered = [...leaveRequests];

Â  Â  Â  Â  Â  Â  if (statusFilter) {
Â  Â  Â  Â  Â  Â  Â  Â  filtered = filtered.filter(req => req.status === statusFilter);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (filtered.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center py-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-4xl mb-3">ðŸ“</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Belum ada pengajuan cuti/ijin
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  container.innerHTML = filtered.map(req => `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4 border-2" style="border-color: #e2e8f0; background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-start justify-between mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-3 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="font-semibold" style="font-size: ${baseSize}px; color: ${config.text_color}">${req.nama}</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-2 py-1 rounded text-xs font-medium" style="background-color: ${config.background_color}; color: ${config.secondary_color}">${req.nik}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-2 py-1 rounded text-xs font-medium capitalize" style="background-color: ${req.leave_type === 'cuti' ? '#dbeafe' : req.leave_type === 'ijin' ? '#fef3c7' : '#fee2e2'}; color: ${req.leave_type === 'cuti' ? '#1e40af' : req.leave_type === 'ijin' ? '#92400e' : '#991b1b'}">${req.leave_type}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-2 gap-4 text-sm mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Tanggal:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px">${formatDate(req.tanggal)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Diajukan:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px">${formatDate(req.tanggal_pengajuan)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Alasan:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px">${req.alasan}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex flex-col gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-3 py-1 rounded-full text-xs font-semibold" style="background-color: ${req.status === 'approved' ? '#dcfce7' : req.status === 'rejected' ? '#fee2e2' : '#fef3c7'}; color: ${req.status === 'approved' ? '#166534' : req.status === 'rejected' ? '#991b1b' : '#92400e'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${req.status === 'approved' ? 'âœ“ Disetujui' : req.status === 'rejected' ? 'âœ— Ditolak' : 'â³ Menunggu'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${req.status === 'pending' ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="approveLeaveRequest('${req.__backendId}')" class="px-2 py-1 rounded text-xs font-medium text-white" style="background-color: #22c55e; font-size: ${baseSize * 0.75}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Setuju
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="rejectLeaveRequest('${req.__backendId}')" class="px-2 py-1 rounded text-xs font-medium text-white" style="background-color: #ef4444; font-size: ${baseSize * 0.75}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Tolak
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `).join('');
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderOvertimeReports() {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('overtimeReportsList');
Â  Â  Â  Â  Â  Â  if (!container) return;

Â  Â  Â  Â  Â  Â  const config = window.elementSdk?.config || defaultConfig;
Â  Â  Â  Â  Â  Â  const baseSize = config.font_size || defaultConfig.font_size;

Â  Â  Â  Â  Â  Â  const statusFilter = document.getElementById('overtimeStatusFilter')?.value;
Â  Â  Â  Â  Â  Â  let filtered = [...overtimeReports];

Â  Â  Â  Â  Â  Â  if (statusFilter) {
Â  Â  Â  Â  Â  Â  Â  Â  filtered = filtered.filter(rep => rep.status === statusFilter);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (filtered.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center py-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-4xl mb-3">â°</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.secondary_color}; font-size: ${baseSize}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Belum ada laporan lembur
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  container.innerHTML = filtered.map(rep => `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="rounded-lg p-4 border-2" style="border-color: #e2e8f0; background-color: ${config.surface_color}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-start justify-between mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-3 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="font-semibold" style="font-size: ${baseSize}px; color: ${config.text_color}">${rep.nama}</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-2 py-1 rounded text-xs font-medium" style="background-color: ${config.background_color}; color: ${config.secondary_color}">${rep.nik}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-2 py-1 rounded text-xs font-medium" style="background-color: #f59e0b; color: white">${rep.total_jam_lembur.toFixed(1)} jam</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-3 gap-4 text-sm mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Tanggal:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px">${formatDate(rep.tanggal)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Waktu:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px">${rep.jam_mulai} - ${rep.jam_selesai}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Dilaporkan:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px">${formatDate(rep.tanggal_laporan)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: ${config.secondary_color}; font-size: ${baseSize * 0.85}px">Pekerjaan:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px">${rep.pekerjaan}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex flex-col gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-3 py-1 rounded-full text-xs font-semibold" style="background-color: ${rep.status === 'approved' ? '#dcfce7' : rep.status === 'rejected' ? '#fee2e2' : '#fef3c7'}; color: ${rep.status === 'approved' ? '#166534' : rep.status === 'rejected' ? '#991b1b' : '#92400e'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${rep.status === 'approved' ? 'âœ“ Disetujui' : rep.status === 'rejected' ? 'âœ— Ditolak' : 'â³ Menunggu'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${rep.status === 'pending' ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="approveOvertimeReport('${rep.__backendId}')" class="px-2 py-1 rounded text-xs font-medium text-white" style="background-color: #22c55e; font-size: ${baseSize * 0.75}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Setuju
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="rejectOvertimeReport('${rep.__backendId}')" class="px-2 py-1 rounded text-xs font-medium text-white" style="background-color: #ef4444; font-size: ${baseSize * 0.75}px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Tolak
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `).join('');
Â  Â  Â  Â  }

Â  Â  Â  Â  async function approveLeaveRequest(recordId) {
Â  Â  Â  Â  Â  Â  const record = allRecords.find(r => r.__backendId === recordId);
Â  Â  Â  Â  Â  Â  if (!record) return;

Â  Â  Â  Â  Â  Â  const updatedRecord = { ...record, status: 'approved' };
Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.update(updatedRecord);

Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Pengajuan cuti/ijin disetujui', 'success');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal menyetujui pengajuan', 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function rejectLeaveRequest(recordId) {
Â  Â  Â  Â  Â  Â  const record = allRecords.find(r => r.__backendId === recordId);
Â  Â  Â  Â  Â  Â  if (!record) return;

Â  Â  Â  Â  Â  Â  const updatedRecord = { ...record, status: 'rejected' };
Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.update(updatedRecord);

Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Pengajuan cuti/ijin ditolak', 'success');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal menolak pengajuan', 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function approveOvertimeReport(recordId) {
Â  Â  Â  Â  Â  Â  const record = allRecords.find(r => r.__backendId === recordId);
Â  Â  Â  Â  Â  Â  if (!record) return;

Â  Â  Â  Â  Â  Â  const updatedRecord = { ...record, status: 'approved' };
Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.update(updatedRecord);

Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Laporan lembur disetujui', 'success');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal menyetujui laporan', 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function rejectOvertimeReport(recordId) {
Â  Â  Â  Â  Â  Â  const record = allRecords.find(r => r.__backendId === recordId);
Â  Â  Â  Â  Â  Â  if (!record) return;

Â  Â  Â  Â  Â  Â  const updatedRecord = { ...record, status: 'rejected' };
Â  Â  Â  Â  Â  Â  const result = await window.dataSdk.update(updatedRecord);

Â  Â  Â  Â  Â  Â  if (result.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Laporan lembur ditolak', 'success');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast('Gagal menolak laporan', 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  const dataHandler = {
Â  Â  Â  Â  Â  Â  onDataChanged(data) {
Â  Â  Â  Â  Â  Â  Â  Â  allRecords = data;
Â  Â  Â  Â  Â  Â  Â  Â  employees = data.filter(record => record.type === 'employee');
Â  Â  Â  Â  Â  Â  Â  Â  attendances = data.filter(record => record.type === 'attendance')
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .sort((a, b) => new Date(b.waktu_absen) - new Date(a.waktu_absen));
Â  Â  Â  Â  Â  Â  Â  Â  rosters = data.filter(record => record.type === 'roster')
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .sort((a, b) => new Date(a.tanggal) - new Date(b.tanggal));
Â  Â  Â  Â  Â  Â  Â  Â  workHours = data.filter(record => record.type === 'work_hours')
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .sort((a, b) => new Date(b.tanggal) - new Date(a.tanggal));
Â  Â  Â  Â  Â  Â  Â  Â  leaveRequests = data.filter(record => record.type === 'leave_request')
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .sort((a, b) => new Date(b.tanggal_pengajuan) - new Date(a.tanggal_pengajuan));
Â  Â  Â  Â  Â  Â  Â  Â  overtimeReports = data.filter(record => record.type === 'overtime_report')
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .sort((a, b) => new Date(b.tanggal_laporan) - new Date(a.tanggal_laporan));
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  async function onConfigChange(config) {
Â  Â  Â  Â  Â  Â  await render();
Â  Â  Â  Â  }

Â  Â  Â  Â  async function init() {
Â  Â  Â  Â  Â  Â  if (window.dataSdk) {
Â  Â  Â  Â  Â  Â  Â  Â  const initResult = await window.dataSdk.init(dataHandler);
Â  Â  Â  Â  Â  Â  Â  Â  if (!initResult.isOk) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("Failed to initialize data SDK");
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (window.elementSdk) {
Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.init({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  defaultConfig,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onConfigChange,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mapToCapabilities: (config) => ({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  recolorables: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  get: () => config.background_color || defaultConfig.background_color,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  config.background_color = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ background_color: value });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  get: () => config.surface_color || defaultConfig.surface_color,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  config.surface_color = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ surface_color: value });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  get: () => config.text_color || defaultConfig.text_color,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  config.text_color = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ text_color: value });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  get: () => config.primary_color || defaultConfig.primary_color,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  config.primary_color = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ primary_color: value });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  get: () => config.secondary_color || defaultConfig.secondary_color,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  config.secondary_color = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ secondary_color: value });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderables: [],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fontEditable: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  get: () => config.font_family || defaultConfig.font_family,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  config.font_family = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ font_family: value });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fontSizeable: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  get: () => config.font_size || defaultConfig.font_size,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  config.font_size = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ font_size: value });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mapToEditPanelValues: (config) => new Map([
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ["app_title", config.app_title || defaultConfig.app_title],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ["company_tagline", config.company_tagline || defaultConfig.company_tagline],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ["shift1_label", config.shift1_label || defaultConfig.shift1_label],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ["shift2_label", config.shift2_label || defaultConfig.shift2_label],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ["shift3_label", config.shift3_label || defaultConfig.shift3_label]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ])
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  await render();
Â  Â  Â  Â  }

Â  Â  Â  Â  init();
Â  Â  </script>
Â <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99b71b355498fda6',t:'MTc2MjYyNjI1Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
